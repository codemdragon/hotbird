<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotBird</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sigmar&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Xuong&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Maiden+Orange&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Righteous:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            --image-position-y: 0%;
        }

    .header-logo-text {
        font-family: 'Xuong', sans-serif;
    }

    .header-shadow {
    border-bottom: none !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 
                0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    .righteous-font {
        font-family: 'Righteous', cursive;
    }
    
    .lato-font {
        font-family: 'Lato', sans-serif;
    }

    .cart-drawer {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
    }
    
    .cart-drawer.open {
        transform: translateX(0);
    }
    
    .overlay {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out;
    }
    
    .overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    .active-section {
        color: white !important;
        background-color: #D62616 !important;
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
    }
    
    .tag-filter.active {
        background-color: #D62616;
        color: black;
    }
    
    .menu-item-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
        background-color: white !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .menu-item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(214, 38, 22, 0.7);
    }
    
    .menu-item-card h4 {
    color: black !important;
    }

    .menu-item-card p {
        color: black !important;
    }

    .menu-item-card .text-\[#D62616\] {
        color: white !important;
    }
        
    .checkout-page {
        display: none;
    }
    
    .image-control-panel {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(26, 26, 26, 0.9);
        padding: 15px;
        border-radius: 10px;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        border: 1px solid #333;
        display: none;
    }
    
    .image-control-panel h4 {
        margin: 0 0 10px 0;
        color: #D62616;
        font-size: 14px;
        text-align: center;
    }
    
    .image-control-slider {
        width: 200px;
        margin: 0 10px;
    }
    
    .image-control-value {
        color: white;
        font-size: 12px;
        min-width: 40px;
        text-align: center;
    }
    
    /* Updated home section for 150% scaling */
    #home {
        position: relative;
        width: 100%;
        overflow: hidden;
        /* Default background for desktop */
        background-image: url('BACKDROPP.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    /* Mobile background image */
    @media (max-width: 767px) {
        #home {
            background-image: url('backdropm.jpg');
        }
    }

    #home-backdrop {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3); /* Dark overlay for better text readability */
        z-index: 0;
    }

    #home-content {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        z-index: 1;
        max-width: 7xl;
        margin: 0 auto;
        padding: 0 1rem;
        text-align: left;
        /* CHANGED: Increased scale from 0.85 to 0.95 */
        transform: scale(0.9);
        transform-origin: top left;
        width: 105.26%; /* 100% / 0.95 */
    }
    
    @media (min-width: 640px) {
        #home-content {
            padding: 0 1.5rem;
        }
    }
    
    @media (min-width: 768px) {
        #home-content {
            padding: 0 2.5rem;
        }
    }
    
    /* Adjusted font sizes for home section */
    /* CHANGED: Increased font sizes for the heading */
    #home-content h2 {
        font-size: 5rem !important; /* Increased from 4.5rem */
        margin-bottom: 1.5rem !important;
    }
    
    /* CHANGED: Removed horizontal padding classes */
    #home-content p {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
        margin-bottom: 1.5rem !important;
        max-width: 100% !important;
        padding: 0 !important;
    }
    
    /* Adjust button sizes */
    .home-buttons button {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
        padding: 1rem 2rem !important; /* Increased padding */
        margin-right: 0.5rem !important;
    }
    
    /* Adjust info item sizes */
    .home-info {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
    }
    
    .home-info i {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
    }
    
    /* Ensure backdrop covers the scaled content */
    #home-backdrop {
        /* CHANGED: Adjusted scale for backdrop */
        transform: scale(1.05); /* 1 / 0.95 ≈ 1.05 */
        transform-origin: center;
        width: 105.26%; /* 100% / 0.95 */
        left: -2.63%; /* (105.26% - 100%) / 2 */
    }
    
    .tag-filters-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .tag-filter {
        flex: 0 0 auto;
        white-space: nowrap;
    }
    .menu-item-image {
        height: 260px;
        width: 100%;
        object-fit: contain; 
        object-position: center;
    }


    /* D-tag: keep custom positioning, no crop */
    .menu-item-image.d-tag-image {
        object-position: 50% var(--image-position-y, 0%);
    }

    /* M-tag: always show the full image */
    .menu-item-image.m-tag-image {
        object-fit: contain;   /* ensures full image fits inside */
        object-position: center;
        background-color: #000000; /* optional: avoid blank edges showing black */
    }

    
    .menu-item-card {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .menu-item-card .card-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .option-selector {
        width: 100%;
        background-color: #dcd9e6;
        color: black;
        border: 1px solid #444;
        border-radius: 0.5rem;
        padding: 0.5rem;
        margin-bottom: 0.75rem;
    }
    
    .item-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
    }
    
    .modal-content {
        background-color: white;
        margin: 2rem auto;
        padding: 2rem;
        border-radius: 1rem;
        max-width: 600px;
        width: 90%;
        position: relative;
    }
    
    .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: black;
        font-size: 1.5rem;
        cursor: pointer;
    }
    
    .modal-image {
        width: 100%;
        height: 300px;
        object-fit: contain; /* Changed from cover to contain */
        object-position: center; /* Ensure image is centered */
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        background-color: #f8f9fa; /* Add background for empty space */
    }
    
    .modal-option {
        margin-bottom: 1rem;
    }
    
    .modal-option label {
        display: block;
        margin-bottom: 0.5rem;
        color: rgb(12, 12, 12);
        font-weight: 600;
    }
    
    .modal-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .modal-buttons button {
        padding: 0.75rem;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
    }
    
    .add-base {
        background-color: #D62616;
        color: white;
        border: none;
    }
    
    .drinks-dropdown {
        display: none;
        background-color: #f8f9fa;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid #e2e8f0;
    }
    
    .drinks-dropdown label {
        display: block;
        margin-bottom: 0.5rem;
        color: #2d3748;
        font-weight: 600;
    }
    
    .vegetable-selection {
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .vegetable-selection h4 {
        color: black;
        margin-bottom: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
    }
    
    .vegetable-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .vegetable-checkbox input {
        margin-right: 0.5rem;
    }
    
    .vegetable-checkbox label {
        color: black;
        cursor: pointer;
    }
    
    .home-buttons {
        justify-content: flex-start;
    }
    
    .home-info {
        justify-content: flex-start;
    }
    
    .header-logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .logo-placeholder {
        width: 50px;
        height: 50px;
        background-color: #D62616;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #121212;
    }
    
    /* UPDATED: Bigger header buttons with more spacing */
    .nav-link {
        font-size: 1.25rem !important; /* Increased from 1.1rem */
        font-weight: 600;
        padding: 0.75rem 1.25rem !important; /* Increased padding */
        transition: all 0.2s ease;
    }
    
    .nav-link:hover {
        transform: translateY(-2px);
    }
    
    /* UPDATED: Increased spacing in header nav container */
    .header-nav-container {
        display: flex;
        align-items: center;
        gap: 2rem !important; /* Increased from 1rem */
    }
    
    /* UPDATED: Bigger cart button */
    #cart-button {
        font-size: 1.1rem !important; /* Increased font size */
        padding: 0.75rem 1.5rem !important; /* Increased padding */
    }
    
    @media (max-width: 767px) {
        /* Updated mobile header layout */
        header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            min-height: 70px; /* Ensure consistent header height */
        }
        
        .mobile-menu-button {
            grid-column: 1;
            justify-self: start;
            z-index: 32;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        .header-logo-container {
            grid-column: 2;
            justify-self: center;
            position: static;
            transform: none;
            display: flex;
            justify-content: center;
            padding: 0 10px; /* Add padding to prevent touching buttons */
        }
        
        .header-logo-container img {
            height: 2.5rem;
            width: auto;
            max-width: 120px; /* Prevent logo from getting too wide */
        }
        
        .header-nav-container {
            grid-column: 3;
            justify-self: end;
            display: flex;
            justify-content: flex-end;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        /* Adjust cart button for mobile with better spacing */
        #cart-button {
            font-size: 0.875rem !important;
            padding: 0.5rem 0.75rem !important;
            white-space: nowrap;
        }
        
        /* Show only icon on very small screens, show text on larger mobile */
        #cart-count {
            display: none;
        }
        
        /* Show cart count text on slightly larger mobile screens */
        @media (min-width: 400px) {
            #cart-count {
                display: inline;
            }
            
            #cart-button {
                padding: 0.5rem 1rem !important;
            }
        }
        
        /* Additional media query for very small phones */
        @media (max-width: 360px) {
            header {
                gap: 0.5rem;
                padding: 0.5rem;
            }
            
            .header-logo-container img {
                height: 2.25rem;
            }
        }
        
        /* For larger mobile devices, add more spacing */
        @media (min-width: 500px) and (max-width: 767px) {
            header {
                gap: 1.5rem;
                padding: 0.5rem 1.5rem;
            }
        }
    }
    
    .card-input-group {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    @media (min-width: 768px) {
        .card-input-group {
            grid-template-columns: 2fr 1fr 1fr;
        }
    }

    /* NEW: Quantity selector styles - MOVED to be above buttons */
    .quantity-selector {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 1.5rem 0;
    }
    
    .quantity-selector span {
        color: black;
        font-weight: 600;
    }
    
    .quantity-controls {
        display: flex;
        align-items: center;
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        overflow: hidden;
    }
    
    .quantity-btn {
        background-color: #dcd9e6;
        color: rgb(0, 0, 0);
        border: none;
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background-color 0.2s;
    }
    
    .quantity-btn:hover {
        background-color: #6b6b6b;
    }
    
    .quantity-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .quantity-input {
        width: 3rem;
        height: 2.5rem;
        text-align: center;
        background-color: #dcd9e6;
        color: black;
        border: none;
        border-left: 1px solid #a3a3a3;
        border-right: 1px solid #a3a3a3;
        font-size: 1.1rem;
        -moz-appearance: textfield;
    }
    
    .quantity-input::-webkit-outer-spin-button,
    .quantity-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    /* NEW: Clear cart button styles */
    .cart-header-actions {
        display: flex;
        gap: 12px;
    }
    
    #clear-cart {
        color: #D62616;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    #clear-cart:hover {
        background-color: rgba(255, 106, 0, 0.1);
    }
    
    #clear-cart:disabled {
        color: #666;
        cursor: not-allowed;
    }
    
    #clear-cart:disabled:hover {
        background-color: transparent;
    }

    /* NEW: Mobile hamburger menu styles */
    .mobile-menu-button {
        display: none; /* Hidden by default on desktop */
        background: none;
        border: none;
        color: #D62616;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem;
    }

    .mobile-menu {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 100;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .mobile-menu.active {
        display: flex;
    }

    .mobile-menu nav {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
    }

    .mobile-menu .nav-link {
        font-size: 1.5rem !important;
        color: white;
        padding: 1rem 2rem !important;
    }

    .mobile-menu .nav-link.active-section {
        color: white !important;
        background-color: #D62616 !important;
    }

    .close-mobile-menu {
        position: absolute;
        top: 2rem;
        right: 2rem;
        background: none;
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
    }

    @media (max-width: 767px) {
        /* Show hamburger menu button on mobile */
        .mobile-menu-button {
            display: block !important; /* Force show on mobile */
        }
        
        .header-logo-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 31;
        }
        
        .mobile-menu-button {
            order: -1; /* This moves it to the left */
            z-index: 32;
        }
        
        .header-nav-container {
            display: flex;
            justify-content: flex-end;
            flex: 1;
        }
        
        /* Adjust header layout for mobile */
        header {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* The rest of your existing mobile styles */
        .header-logo-text {
            display: none;
        }
        
        .header-nav-container nav {
            display: none;
        }
        
        #home-content h2 {
            font-size: 3.5rem !important;
        }
        
        #home-content p {
            font-size: 1.4rem !important;
        }
    }

    /* NEW: Combo items styles */
    .combo-items-section {
        background-color: #f8f9fa !important;
        border-left: 4px solid #D62616;
    }

    .combo-items-section h4 {
        color: #D62616 !important;
        font-weight: 700;
    }

    /* NEW: Updated checkout page colors */
    .checkout-page .bg-\[\#1a1a1a\] {
        background-color: #ffffff !important;
        color: #2d3748;
    }

    .checkout-page .text-white {
        color: #2d3748 !important;
    }

    .checkout-page .bg-\[\#222\] {
        background-color: #f7fafc !important;
        color: #2d3748;
        border: 1px solid #e2e8f0;
    }

    .checkout-page input,
    .checkout-page select,
    .checkout-page textarea {
        color: #2d3748 !important;
    }

    .checkout-page input::placeholder {
        color: #a0aec0 !important;
    }

    .checkout-page .border-\[\#333\] {
        border-color: #e2e8f0 !important;
    }

    .checkout-page .text-gray-400 {
        color: #718096 !important;
    }

    .checkout-page h2,
    .checkout-page h3 {
        color: #2d3748 !important;
    }
</style>
</head>

<body class="bg-[#eae8ef] text-[#D62616]">  <div class="image-control-panel">
        <h4>Image Vertical Position</h4>
        <div class="flex items-center"> <span class="image-control-value" id="position-value">0%</span> <input
                type="range" min="-30" max="30" value="0" class="image-control-slider" id="image-position-slider">
            <button id="reset-position" class="bg-[#D62616] text-white text-xs px-2 py-1 rounded">Reset</button> </div>
    </div>

<div id="mobile-menu" class="mobile-menu">
    <button class="close-mobile-menu">
        <i class="fas fa-times"></i>
    </button>
    <nav>
        <a class="nav-link active-section" href="#home">Home</a>
        <a class="nav-link" href="#menu">Menu</a>
        <a class="nav-link" href="#about">About</a>
        <a class="nav-link" href="#contact">Contact</a>
    </nav>
</div>

<div id="item-modal" class="item-modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <img id="modal-image" class="modal-image" src="" alt="">
        <h2 id="modal-title" class="text-black text-2xl font-bold mb-2"></h2>
        <p id="modal-description" class="text-black mb-4"></p>
        
        <div id="modal-options">
            </div>
        
        <div id="burger-selection" class="drinks-dropdown"> 
            <h4>Select a Burger:</h4>
            <select id="burger-select" class="option-selector">
                </select>
        </div>

        <div id="drinks-dropdown" class="drinks-dropdown">
            <h4>Select a Drink:</h4>
            <select id="drink-select" class="option-selector">
                </select>
        </div>
        
        <div id="vegetable-selection" class="vegetable-selection" style="display: none;">
            <h4>Select Vegetables:</h4>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-lettuce" name="vegetables" value="Lettuce">
                <label for="vegetable-lettuce">Lettuce</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-onions" name="vegetables" value="Onions">
                <label for="vegetable-onions">Onions</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-pickles" name="vegetables" value="Pickles">
                <label for="vegetable-pickles">Pickles</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-tomatoes" name="vegetables" value="Tomatoes">
                <label for="vegetable-tomatoes">Tomatoes</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-cucumber" name="vegetables" value="Cucumber">
                <label for="vegetable-cucumber">Cucumber</label>
            </div>
        </div>
        
        <div class="quantity-selector">
            <span>Quantity:</span>
            <div class="quantity-controls">
                <button class="quantity-btn decrease-quantity" disabled>-</button>
                <input type="number" id="modal-quantity" class="quantity-input" value="1" min="1" max="10">
                <button class="quantity-btn increase-quantity">+</button>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button id="modal-add-base" class="add-base">Add to Cart - £<span id="modal-base-price">0.00</span></button>
        </div>
    </div>
</div>

<div class="overlay fixed inset-0 bg-black bg-opacity-50 z-40"></div>

<div class="cart-drawer fixed top-0 right-0 h-full w-80 bg-[#1a1a1a] shadow-lg z-50">
    <div class="p-4 border-b border-[#222222] flex justify-between items-center">
        <h2 class="text-white font-semibold text-lg">Your Cart</h2>
        <div class="cart-header-actions">
            <button id="clear-cart" class="text-[#D62616] hover:text-[#a01c10] disabled:text-gray-500 disabled:cursor-not-allowed" disabled>
                Clear All
            </button>
            <button id="close-cart" class="text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <div class="p-4 overflow-y-auto h-full pb-32">
        <ul id="cart-items" class="space-y-3">
            </ul>
    </div>
    <div class="absolute bottom-0 left-0 right-0 p-4 bg-[#1a1a1a] border-t border-[#222222]">
        <div class="flex justify-between text-white mb-2 text-base">
            <span class="font-semibold">Subtotal:</span>
            <span id="cart-subtotal">£0.00</span>
        </div>
        <button id="checkout-button" class="w-full bg-[#D62616] text-white text-base font-semibold rounded py-3 hover:bg-[#a01c10]">
            Checkout
        </button>
    </div>
</div>

<div id="main-content">
    <header class="flex items-center justify-between px-4 sm:px-6 md:px-10 py-4 bg-white sticky top-0 z-30 header-shadow">        
        <div class="header-logo-container">
            <img src="Logo.jpg" alt="HotBird" class="h-12">
        </div>
        
        <button class="mobile-menu-button md:hidden">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="header-nav-container">
            <nav class="hidden md:flex space-x-4 text-[#D62616] items-center">
                <a class="hover:text-[#a01c10] nav-link active-section" href="#home">Home</a>
                <a class="hover:text-[#a01c10] nav-link" href="#menu">Menu</a>
                <a class="hover:text-[#a01c10] nav-link" href="#about">About</a>
                <a class="hover:text-[#a01c10] nav-link" href="#contact">Contact</a>
            </nav>
            <button id="cart-button" class="flex items-center space-x-2 bg-[#D62616] text-white text-base font-semibold rounded px-4 py-2 hover:bg-[#a01c10]">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">Cart (0)</span>
            </button>
        </div>
    </header>

    <main>
        <section id="home">
            <div id="home-backdrop"></div>
            <div id="home-content" class="py-12 md:py-24">
                <div class="max-w-4xl">
                    <h2 class="text-white text-6xl sm:text-7xl md:text-8xl font-extrabold leading-tight mb-8">
                        <span class="righteous-font block mb-2">Fryin' High</span>
                        <span class="text-[#D62616] righteous-font block">Since Day One</span>
                    </h2>
                    <p class="lato-font text-xl sm:text-2xl md:text-3xl text-gray-300 mb-12 leading-relaxed w-full"> Deliciously bold, perfectly crispy, and full of flavor, our golden fried chicken, juicy wings and crispy fries are made to satisfy every craving. Fresh ingredients, fiery taste, and fun in every bite - that's the hot bird promise. </p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 mb-6 home-buttons">
                        <button id="order-now-btn" class="bg-[#D62616] text-black text-lg sm:text-xl font-semibold rounded-xl px-8 py-4 hover:bg-[#a01c10] transition-colors"> Order Now </button>
                        <button id="view-menu-btn" class="bg-black text-white border-2 border-[#D62616] text-lg sm:text-xl font-semibold rounded-xl px-10 py-4 hover:bg-[#D62616] hover:text-black transition-colors"> View Menu </button>
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-12 text-xl sm:text-2xl text-gray-300 font-semibold home-info">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-star text-[#D62616] text-2xl"></i>
                            <span>4.8 Rating</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-clock text-[#D62616] text-2xl"></i>
                            <span>12PM - 2AM Daily</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="menu" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20">
            <h3 class="text-center font-semibold text- text-3xl lg:text-6xl mb-4 righteous-font">OUR MENU</h3>
            <p class="text-center text-gray-400 text-lg sm:text-xl mb-12">Discover our delicious selection of kebabs, burgers and more</p>

            <div class="mb-12">
                <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
                    <div class="relative w-full sm:w-80">
                        <input type="text" id="search-input" placeholder="Search menu items..." class="w-full bg-[#1a1a1a] text-white text-lg rounded-xl py-3 px-5 pl-12 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        <i class="fas fa-search absolute left-4 top-3.5 text-gray-400 text-lg"></i>
                    </div>
                </div>
                <div class="mt-8">
                    <h4 class="text-center text-[#D62616] text-xl mb-4">Filter by Category</h4>
                    <div class="tag-filters-container">
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black active" data-tag="all">All</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotdeals">Hot Deals</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotbuckets">Hot Buckets</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotbirds">Hot Birds</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="wings">Wingin' it</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hottenders">Tenders</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="sauces">Dips & Addons</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="drinks">Drinks</button>
                    </div>
                </div>
            </div>

            <div id="menu-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                </div>
        </section>

        <section id="about" class="max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20 text-center text-lg sm:text-xl text-black leading-relaxed">
            <h3 class="font-semibold text-blacktext-3xl sm:text-4xl mb-8">Our Story</h3>
            <p class="mb-8"> Welcome to Hot Bird, where chicken isn't just food - it's an adventure </p>
            <p class="mb-8"> Crispy, juicy, and packed with bold flavors, our chicken and fries are here to make your taste buds tingle </p>
            <p> Every bite is fun, fiery, and impossible to forget. </p>
        </section>

        <section id="contact" class="max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20 text-center text-lg sm:text-xl text-black leading-relaxed">
            <h3 class="font-semibold text-black text-3xl sm:text-4xl mb-8">Visit Us</h3>
            <p class="mb-12 text-2xl">Come and experience the taste of authentic kebabs</p>
            <div class="flex flex-col sm:flex-row justify-center gap-8">
                <a href="https://maps.app.goo.gl/BQyKUCf2AcjfTWvT9" target="_blank" class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg block hover:bg-[#F2F0EF] transition-colors">
                    <i class="fas fa-map-marker-alt text-[#D62616] text-3xl mb-4"></i>
                    <p> 472 Great West Road<br> Hounslow, England<br> TW5 0JA </p>
                </a>
                <div class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg">
                    <i class="fas fa-phone-alt text-[#D62616] text-3xl mb-4"></i>
                    <p>+44 20 7998 6050</p>
                </div>
                <div class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg">
                    <i class="fas fa-clock text-[#D62616] text-3xl mb-4"></i>
                    <p> MON - SUN<br> <span class="font-bold">12PM TIL 2AM</span> </p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#0a0a0a] border-t border-[#222222] py-6 px-4 sm:px-6 md:px-10 text-lg text-[#D62616] font-semibold flex flex-col sm:flex-row justify-between items-center max-w-7xl mx-auto">
        <div class="mb-4 sm:mb-0">HotBird</div>
        <div class="text-gray-500 text-base">© 2023 HotBird. All rights reserved.</div>
    </footer>
</div>

<div id="checkout-page" class="checkout-page max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12">
    <h2 class="text-3xl sm:text-4xl font-bold text-white mb-8 text-center">Checkout</h2>

    <div class="bg-[#1a1a1a] rounded-xl p-8 mb-8">
        <h3 class="text-2xl font-semibold text-white mb-6">Order Summary</h3>
        <div id="checkout-items" class="space-y-4 mb-6">
            </div>
        <div class="border-t border-[#333] pt-6">
            <div class="flex justify-between text-xl text-white">
                <span class="font-semibold">Total:</span>
                <span id="checkout-total" class="font-bold">£0.00</span>
            </div>
        </div>
    </div>

    <form id="checkout-form" class="bg-[#1a1a1a] rounded-xl p-8">
        <h3 class="text-2xl font-semibold text-white mb-8">Customer Information</h3>

        <div class="mb-6">
            <label for="delivery-type" class="block text-white mb-3 text-lg">Order Type</label>
            <select id="delivery-type" class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg">
                <option value="">Select order type...</option>
                <option value="collection">Collection</option>
            </select>
            <p class="text-amber-500 text-sm mt-2 font-semibold"> </p> </div>

        <div id="details-container" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="full-name" class="block text-white mb-3 text-lg">Full Name</label>
                    <input type="text" id="full-name" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
                </div>
                <div>
                    <label for="phone" class="block text-white mb-3 text-lg">Phone Number</label>
                    <input type="tel" id="phone" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
                </div>
            </div>

            <div class="mb-6">
                <label for="email" class="block text-white mb-3 text-lg">Email Address</label>
                <input type="email" id="email" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
            </div>

            <div class="mb-6">
                <label for="address" class="block text-white mb-3 text-lg">Special Notes / Requests (Max 250 characters)</label>
                <textarea id="address" rows="3" maxlength="250" class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input" placeholder="e.g., Allergen information, specific delivery instructions..."></textarea>
            </div>
            
            <button type="submit" class="w-full bg-[#D62616] text-white text-base font-semibold rounded py-3 hover:bg-[#a01c10] transition-colors mt-4">
                Place Order
            </button>
        </div>
    </form>
</div>

<script>
    // --- Global Data for Menu, Cart, and Options ---

    // Menu data from hot-deals.json (embedded for robust loading)
    const menuDataJSON = {
        "items": [
            {
                "name": "Crunch combo",
                "description": "Includes 2 pieces fried chicken along with fries, bun and a sauce of your choice",
                "image": "images/deal 1.jpg",
                "price": 10,
                "tags": ["hotdeals", "bs"], // 'bs' tag for Burger Selection
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false
            },
            {
                "name": "Drumstick Delight combo",
                "description": "Includes 4 crispy drumsticks along with fries, bun, coleslaw and a sauce of your choice",
                "image": "images/deal 2.jpg",
                "price": 14,
                "tags": ["hotdeals", "combo"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false
            },
            {
                "name": "All-out crunch combo",
                "description": "Includes 4 crispy fried chicken pieces along with fries, bun, coleslaw, 1 hot bird garlic sauce 1 sauce of your choice",
                "image": "images/deal 3.jpg",
                "price": 18,
                "tags": ["hotdeals", "combo"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false
            },
            {
                "name": "Hot bird Deluxe combo",
                "description": "Includes 1 Nash Hot Bird burger, 2 crispy fried chicken pieces,1 large fries, bun and a sauce of your choice",
                "image": "images/deal 4.jpg",
                "price": 20,
                "tags": ["hotdeals", "combo"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false
            },
            {
                "name": "Hot Bird family feast combo",
                "description": "Includes 10 crispy fried chicken pieces along with 2 fries, 2 buns, 1 large drink, 2 hot bird garlic sauces and 1 sauce of your choice",
                "image": "images/deal 6.jpg",
                "tags": ["hotdeals"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false,
                "showDrinksDropdown": true, // Example of a property for drink selection
                "price": 30
            },
            {
                "name": "The Big Crunch combo",
                "description": "Includes 6 crispy fried chicken pieces along with 2 fries, 2 buns, 2 small drinks, 2 hot bird garlic sauces and 1 sauce of your choice",
                "image": "images/deal 7.jpg",
                "tags": ["hotdeals"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false,
                "showDrinksDropdown": true,
                "price": 26
            },
            {
                "name": "Hot Bird trio combo",
                "description": "Includes 3 pieces fried chicken along with fries, bun and a sauce of your choice",
                "image": "images/deal 5.jpg",
                "tags": ["hotdeals"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false,
                "showDrinksDropdown": false,
                "price": 14
            },
            {
                "name": "Hot Bird Ultimate combo",
                "description": "Includes 8 crispy fried chicken pieces along with 2 burgers of your choice fries, 2 buns, 3 coleslaws, 1 large drink, 2 hot bird garlic sauces and 1 sauce of your choice",
                "image": "images/deal 8.jpg",
                "tags": ["hotdeals"],
                "mealPriceModifier": 0,
                "showSlider": false,
                "sauces": true,
                "vegetables": false,
                "price": 35
            }
        ]
    };
    
    // Placeholder data for other options
    const drinksData = [
        { name: "Small Drink (Included)", price: 0.00 },
        { name: "Coke (+£1.50)", price: 1.50 },
        { name: "Fanta (+£1.50)", price: 1.50 },
        { name: "Sprite (+£1.50)", price: 1.50 }
    ];
    
    const burgerOptions = [
        { name: "Hot Bird Original Burger", price: 0.00 },
        { name: "Smoky BBQ Burger (+£1.00)", price: 1.00 },
        { name: "Spicy Nashville Burger (+£1.50)", price: 1.50 }
    ];

    let allMenuItems = menuDataJSON.items; // Initialize with hot-deals
    let filteredMenuItems = [...allMenuItems];
    let cart = JSON.parse(localStorage.getItem('hotbirdCart')) || [];
    let currentItem = null;


    // --- Core Functions ---

    function renderMenuItems(items) {
        const container = document.getElementById('menu-container');
        if (!container) return; // Guard clause
        container.innerHTML = '';

        items.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.className = 'menu-item-card rounded-xl p-4 flex flex-col items-center text-center';
            itemElement.setAttribute('data-tags', item.tags ? item.tags.join(' ') : '');
            itemElement.setAttribute('data-item-name', item.name.toLowerCase());
            itemElement.innerHTML = `
                <img src="${item.image}" alt="${item.name}" class="menu-item-image rounded-lg mb-4 ${item.tags && item.tags.includes('d') ? 'd-tag-image' : ''} ${item.tags && item.tags.includes('m') ? 'm-tag-image' : ''}">
                <div class="card-content flex flex-col justify-between w-full">
                    <h4 class="text-xl font-bold mb-2">${item.name}</h4>
                    <p class="text-sm mb-4 text-gray-600">${item.description}</p>
                    <div class="mt-auto">
                        <span class="text-2xl font-extrabold text-[#D62616]">£${item.price.toFixed(2)}</span>
                        <button class="add-to-cart-btn w-full mt-4 bg-[#D62616] text-white py-2 rounded-lg font-semibold hover:bg-[#a01c10] transition-colors" data-item-id="${item.name.replace(/\s/g, '-')}">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `;
            itemElement.querySelector('.add-to-cart-btn').addEventListener('click', (e) => {
                e.stopPropagation();
                openItemModal(item);
            });
            container.appendChild(itemElement);
        });
    }

    function renderCart() {
        const cartItemsList = document.getElementById('cart-items');
        const cartSubtotalSpan = document.getElementById('cart-subtotal');
        const cartCountSpan = document.getElementById('cart-count');
        const clearCartButton = document.getElementById('clear-cart');

        cartItemsList.innerHTML = '';
        let subtotal = 0;

        cart.forEach((item, index) => {
            const totalPrice = item.price * item.quantity;
            subtotal += totalPrice;

            let optionsHtml = '';
            if (item.options) {
                optionsHtml = Object.entries(item.options).map(([key, value]) => {
                    if (value) {
                         // Format the option name for display
                        const formattedKey = key.charAt(0).toUpperCase() + key.slice(1);
                        return `<li class="text-xs text-gray-400 ml-3 list-disc">${formattedKey}: ${value}</li>`;
                    }
                    return '';
                }).join('');
            }


            const itemElement = document.createElement('li');
            itemElement.className = 'flex justify-between items-center text-white border-b border-[#222222] pb-3';
            itemElement.innerHTML = `
                <div class="flex-1 min-w-0">
                    <p class="font-semibold text-sm truncate">${item.name}</p>
                    <ul class="mt-1">${optionsHtml}</ul>
                    <div class="flex items-center space-x-2 mt-1">
                        <button class="text-gray-400 hover:text-[#D62616] text-sm remove-item" data-index="${index}"><i class="fas fa-trash"></i> Remove</button>
                    </div>
                </div>
                <div class="text-right ml-4">
                    <p class="text-sm font-bold">£${totalPrice.toFixed(2)}</p>
                    <div class="flex items-center justify-end mt-1">
                        <button class="bg-[#222] text-white w-5 h-5 text-xs rounded-l decrease-cart-quantity" data-index="${index}" ${item.quantity <= 1 ? 'disabled' : ''}>-</button>
                        <span class="bg-[#222] text-white w-6 h-5 text-xs flex items-center justify-center">${item.quantity}</span>
                        <button class="bg-[#222] text-white w-5 h-5 text-xs rounded-r increase-cart-quantity" data-index="${index}">+</button>
                    </div>
                </div>
            `;
            cartItemsList.appendChild(itemElement);
        });

        cartSubtotalSpan.textContent = `£${subtotal.toFixed(2)}`;
        cartCountSpan.textContent = `Cart (${cart.reduce((total, item) => total + item.quantity, 0)})`;
        clearCartButton.disabled = cart.length === 0;

        localStorage.setItem('hotbirdCart', JSON.stringify(cart));
    }

    function calculateModalPrice() {
        if (!currentItem) return;

        let totalPrice = currentItem.price;
        const quantity = parseInt(document.getElementById('modal-quantity').value);

        // 1. Burger Selection Logic (for 'bs' tag items)
        const hasBurgerOption = currentItem.tags && currentItem.tags.includes('bs');
        if (hasBurgerOption) {
            const burgerSelect = document.getElementById('burger-select');
            const selectedBurgerIndex = parseInt(burgerSelect.value);
            if (selectedBurgerIndex >= 0) {
                totalPrice += burgerOptions[selectedBurgerIndex].price;
            }
        }
        
        // 2. Drinks Selection Logic
        const drinkSelect = document.getElementById('drink-select');
        const selectedDrinkIndex = parseInt(drinkSelect.value);
        if (selectedDrinkIndex >= 0) {
            totalPrice += drinksData[selectedDrinkIndex].price;
        }

        // 3. Update Modal Price
        document.getElementById('modal-base-price').textContent = (totalPrice * quantity).toFixed(2);
    }

    function openItemModal(item) {
        currentItem = item;
        document.getElementById('modal-image').src = item.image;
        document.getElementById('modal-title').textContent = item.name;
        document.getElementById('modal-description').textContent = item.description;
        document.getElementById('modal-quantity').value = 1;
        document.querySelector('.decrease-quantity').disabled = true;

        // Reset and check for Burger Selection (bs)
        const hasBurgerOption = item.tags && item.tags.includes('bs');
        const burgerSelection = document.getElementById('burger-selection');
        const burgerSelect = document.getElementById('burger-select');

        if (hasBurgerOption) {
            burgerSelection.style.display = 'block';
            burgerSelect.innerHTML = burgerOptions.map((option, index) =>
                `<option value="${index}">${option.name}</option>`
            ).join('');
            burgerSelect.value = 0; // Select first option by default
            burgerSelect.onchange = calculateModalPrice;
        } else {
            burgerSelection.style.display = 'none';
        }

        // Reset and check for Drinks Dropdown
        const drinksDropdown = document.getElementById('drinks-dropdown');
        const drinkSelect = document.getElementById('drink-select');
        
        const showDrinks = item.showDrinksDropdown || item.tags.includes('drinks');
        if (showDrinks) {
            drinksDropdown.style.display = 'block';
            // Populate drinks dropdown
            drinkSelect.innerHTML = drinksData.map((drink, index) => 
                `<option value="${index}" ${index === 0 ? 'selected' : ''}>${drink.name}</option>`
            ).join('');
            drinkSelect.onchange = calculateModalPrice;
        } else {
            drinksDropdown.style.display = 'none';
        }


        // Reset and check for Vegetable Selection
        const vegetableSelection = document.getElementById('vegetable-selection');
        if (item.vegetables) {
            vegetableSelection.style.display = 'block';
            vegetableSelection.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false; // Reset
            });
        } else {
            vegetableSelection.style.display = 'none';
        }


        calculateModalPrice();
        document.getElementById('item-modal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function addToCart() {
        if (!currentItem) return;

        const quantity = parseInt(document.getElementById('modal-quantity').value);
        let finalPrice = currentItem.price;

        const itemToAdd = {
            id: currentItem.name.replace(/\s/g, '-') + Date.now(),
            name: currentItem.name,
            price: currentItem.price,
            quantity: quantity,
            options: {},
        };

        // 1. Burger Option (for 'bs' items)
        if (currentItem.tags && currentItem.tags.includes('bs')) {
            const burgerSelect = document.getElementById('burger-select');
            const selectedBurgerIndex = parseInt(burgerSelect.value);
            const selectedBurger = burgerOptions[selectedBurgerIndex];
            
            itemToAdd.options.burger = selectedBurger.name.replace(/ \(\+£[\d.]+\)/, ''); // Remove price modifier from option name
            finalPrice += selectedBurger.price;
        }

        // 2. Drinks Option
        if (currentItem.showDrinksDropdown || currentItem.tags.includes('drinks')) {
            const drinkSelect = document.getElementById('drink-select');
            const selectedDrinkIndex = parseInt(drinkSelect.value);
            const selectedDrink = drinksData[selectedDrinkIndex];

            itemToAdd.options.drink = selectedDrink.name.replace(/ \(\+£[\d.]+\)/, ''); // Remove price modifier
            finalPrice += selectedDrink.price;
        }

        // 3. Vegetable Options
        if (currentItem.vegetables) {
            const selectedVeggies = Array.from(document.querySelectorAll('#vegetable-selection input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            if (selectedVeggies.length > 0) {
                itemToAdd.options.vegetables = selectedVeggies.join(', ');
            }
        }
        
        itemToAdd.price = finalPrice; // Set the final base price for a single item

        cart.push(itemToAdd);
        renderCart();
        closeModal();
    }


    // --- Event Handlers and Initializers ---

    function closeModal() {
        document.getElementById('item-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
        currentItem = null;
    }
    
    function initModalEvents() {
        document.querySelector('.close-modal').onclick = closeModal;
        document.getElementById('modal-add-base').onclick = addToCart;

        // Quantity controls
        const quantityInput = document.getElementById('modal-quantity');
        const decreaseBtn = document.querySelector('.decrease-quantity');
        const increaseBtn = document.querySelector('.increase-quantity');

        function updateQuantity(delta) {
            let newQuantity = parseInt(quantityInput.value) + delta;
            newQuantity = Math.max(1, newQuantity); // Ensure minimum is 1
            quantityInput.value = newQuantity;
            decreaseBtn.disabled = newQuantity <= 1;
            calculateModalPrice();
        }

        decreaseBtn.onclick = () => updateQuantity(-1);
        increaseBtn.onclick = () => updateQuantity(1);
        quantityInput.oninput = () => {
            let val = parseInt(quantityInput.value);
            if (isNaN(val) || val < 1) {
                val = 1;
            }
            quantityInput.value = val;
            decreaseBtn.disabled = val <= 1;
            calculateModalPrice();
        };

        // Other option change events for price update
        document.querySelectorAll('#vegetable-selection input[type="checkbox"]').forEach(checkbox => {
            checkbox.onchange = calculateModalPrice;
        });

        // The burger select change event is set inside openItemModal
    }

    function initCartEvents() {
        const cartDrawer = document.querySelector('.cart-drawer');
        const overlay = document.querySelector('.overlay');

        document.getElementById('cart-button').onclick = () => {
            cartDrawer.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        };

        const closeCart = () => {
            cartDrawer.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        };

        document.getElementById('close-cart').onclick = closeCart;
        overlay.onclick = closeCart;

        document.getElementById('clear-cart').onclick = () => {
            cart = [];
            renderCart();
        };

        document.getElementById('cart-items').addEventListener('click', (e) => {
            const index = e.target.closest('[data-index]').dataset.index;
            if (!index) return;
            const itemIndex = parseInt(index);
            const item = cart[itemIndex];

            if (e.target.closest('.remove-item')) {
                cart.splice(itemIndex, 1);
            } else if (e.target.closest('.increase-cart-quantity')) {
                item.quantity++;
            } else if (e.target.closest('.decrease-cart-quantity')) {
                if (item.quantity > 1) {
                    item.quantity--;
                }
            }
            renderCart();
        });
    }

    function initFilterAndSearch() {
        const filters = document.querySelectorAll('.tag-filter');
        const searchInput = document.getElementById('search-input');

        function filterAndSearch() {
            const activeFilter = document.querySelector('.tag-filter.active').getAttribute('data-tag');
            const searchTerm = searchInput.value.toLowerCase().trim();

            filteredMenuItems = allMenuItems.filter(item => {
                const tagMatch = activeFilter === 'all' || (item.tags && item.tags.includes(activeFilter));
                const nameMatch = item.name.toLowerCase().includes(searchTerm) || item.description.toLowerCase().includes(searchTerm);
                return tagMatch && nameMatch;
            });

            renderMenuItems(filteredMenuItems);
        }

        filters.forEach(filter => {
            filter.addEventListener('click', (e) => {
                filters.forEach(f => f.classList.remove('active'));
                e.currentTarget.classList.add('active');
                filterAndSearch();
            });
        });

        searchInput.addEventListener('input', filterAndSearch);
    }
    
    function initCheckoutEvents() {
        const checkoutButton = document.getElementById('checkout-button');
        const mainContent = document.getElementById('main-content');
        const checkoutPage = document.getElementById('checkout-page');
        const checkoutItems = document.getElementById('checkout-items');
        const checkoutTotal = document.getElementById('checkout-total');
        const deliveryType = document.getElementById('delivery-type');
        const detailsContainer = document.getElementById('details-container');
        
        document.getElementById('order-now-btn').addEventListener('click', () => {
            document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
        });
        
        document.getElementById('view-menu-btn').addEventListener('click', () => {
            document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
        });

        checkoutButton.addEventListener('click', () => {
            if (cart.length === 0) return;
            
            // Close cart drawer
            document.querySelector('.cart-drawer').classList.remove('open');
            document.querySelector('.overlay').classList.remove('active');
            
            // Show checkout page
            mainContent.style.display = 'none';
            checkoutPage.style.display = 'block';
            document.body.style.overflow = 'auto'; // Re-enable scrolling

            // Populate checkout summary
            checkoutItems.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;

                let optionsHtml = '';
                if (item.options) {
                    optionsHtml = Object.entries(item.options).map(([key, value]) => {
                        return `<span class="text-xs text-gray-400 block">${key}: ${value}</span>`;
                    }).join('');
                }
                
                checkoutItems.innerHTML += `
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-white font-semibold">${item.name} (x${item.quantity})</p>
                            ${optionsHtml}
                        </div>
                        <span class="text-white font-bold">£${itemTotal.toFixed(2)}</span>
                    </div>
                `;
            });

            checkoutTotal.textContent = `£${total.toFixed(2)}`;
            window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll to top of checkout
        });

        // Toggle form details based on order type
        deliveryType.addEventListener('change', (e) => {
            if (e.target.value === 'collection') {
                detailsContainer.style.display = 'block';
            } else {
                detailsContainer.style.display = 'none';
            }
        });
        
        // Simple form submit handler
        document.getElementById('checkout-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // In a real application, you would send this data to a server
            const orderData = {
                orderType: deliveryType.value,
                customer: {
                    fullName: document.getElementById('full-name').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                },
                notes: document.getElementById('address').value,
                items: cart,
                total: parseFloat(checkoutTotal.textContent.replace('£', ''))
            };

            console.log('Order Placed:', orderData);
            alert(`Order Placed for Collection! Total: ${checkoutTotal.textContent}. Details logged to console.`);

            // Reset after successful order
            cart = [];
            localStorage.removeItem('hotbirdCart');
            renderCart();
            mainContent.style.display = 'block';
            checkoutPage.style.display = 'none';
        });

    }

    function initScrollSpy() {
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active-section');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active-section');
                        }
                    });
                }
            });
        }, {
            rootMargin: "-50% 0px -50% 0px" // Adjusted to activate when section is roughly in the middle
        });

        sections.forEach(section => {
            observer.observe(section);
        });
    }
    
    function initMobileMenu() {
        const menuButton = document.querySelector('.mobile-menu-button');
        const closeButton = document.querySelector('.close-mobile-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        const navLinks = mobileMenu.querySelectorAll('.nav-link');

        menuButton.addEventListener('click', () => {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        closeButton.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                // The main DOMContentLoaded listener handles the smooth scroll and closing logic
            });
        });
    }

    // --- Initialization ---

    function init() {
        // Initial rendering of menu items
        renderMenuItems(allMenuItems); 
        
        // Initial cart rendering
        renderCart();

        // Initialize all event listeners
        initModalEvents();
        initCartEvents();
        initFilterAndSearch();
        initCheckoutEvents();
        initScrollSpy();
        initMobileMenu();
    }

    // DOM Content Loaded
    document.addEventListener('DOMContentLoaded', async () => {
        // Init app
        init();

        // Smooth scrolling for navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);

                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' });
                    
                    // Update active link immediately
                    document.querySelectorAll('.nav-link').forEach(navLink => {
                        navLink.classList.remove('active-section');
                    });
                    link.classList.add('active-section');
                    
                    // Close mobile menu if open
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu.classList.contains('active')) {
                        mobileMenu.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                }
            });
        });
    });
</script>
</body>

</html>
