<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotBird</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <!-- Import all required fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sigmar&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Xuong&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Maiden+Orange&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            --image-position-y: 0%;
        }

    .header-logo-text {
        font-family: 'Xuong', sans-serif;
    }

    .header-shadow {
    border-bottom: none !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 
                0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    .righteous-font {
        font-family: 'Righteous', cursive;
    }
    
    .lato-font {
        font-family: 'Lato', sans-serif;
    }

    .cart-drawer {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
    }
    
    .cart-drawer.open {
        transform: translateX(0);
    }
    
    .overlay {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out;
    }
    
    .overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    .active-section {
        color: white !important;
        background-color: #D62616 !important;
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
    }
    
    .tag-filter.active {
        background-color: #D62616;
        color: black;
    }
    
    .menu-item-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
        background-color: white !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .menu-item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(214, 38, 22, 0.7);
    }
    
    .menu-item-card h4 {
    color: black !important;
    }

    .menu-item-card p {
        color: black !important;
    }

    .menu-item-card .text-\[#D62616\] {
        color: white !important;
    }
        
    .checkout-page {
        display: none;
    }
    
    .image-control-panel {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(26, 26, 26, 0.9);
        padding: 15px;
        border-radius: 10px;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        border: 1px solid #333;
        display: none;
    }
    
    .image-control-panel h4 {
        margin: 0 0 10px 0;
        color: #D62616;
        font-size: 14px;
        text-align: center;
    }
    
    .image-control-slider {
        width: 200px;
        margin: 0 10px;
    }
    
    .image-control-value {
        color: white;
        font-size: 12px;
        min-width: 40px;
        text-align: center;
    }
    
    /* Updated home section for 150% scaling */
    #home {
        position: relative;
        width: 100%;
        overflow: hidden;
        /* Default background for desktop */
        background-image: url('BACKDROPP.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    /* Mobile background image */
    @media (max-width: 767px) {
        #home {
            background-image: url('backdropm.jpg');
        }
    }

    #home-backdrop {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3); /* Dark overlay for better text readability */
        z-index: 0;
    }

    #home-content {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        z-index: 1;
        max-width: 7xl;
        margin: 0 auto;
        padding: 0 1rem;
        text-align: left;
        /* CHANGED: Increased scale from 0.85 to 0.95 */
        transform: scale(0.9);
        transform-origin: top left;
        width: 105.26%; /* 100% / 0.95 */
    }
    
    @media (min-width: 640px) {
        #home-content {
            padding: 0 1.5rem;
        }
    }
    
    @media (min-width: 768px) {
        #home-content {
            padding: 0 2.5rem;
        }
    }
    
    /* Adjusted font sizes for home section */
    /* CHANGED: Increased font sizes for the heading */
    #home-content h2 {
        font-size: 5rem !important; /* Increased from 4.5rem */
        margin-bottom: 1.5rem !important;
    }
    
    /* CHANGED: Removed horizontal padding classes */
    #home-content p {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
        margin-bottom: 1.5rem !important;
        max-width: 100% !important;
        padding: 0 !important;
    }
    
    /* Adjust button sizes */
    .home-buttons button {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
        padding: 1rem 2rem !important; /* Increased padding */
        margin-right: 0.5rem !important;
    }
    
    /* Adjust info item sizes */
    .home-info {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
    }
    
    .home-info i {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
    }
    
    /* Ensure backdrop covers the scaled content */
    #home-backdrop {
        /* CHANGED: Adjusted scale for backdrop */
        transform: scale(1.05); /* 1 / 0.95 ≈ 1.05 */
        transform-origin: center;
        width: 105.26%; /* 100% / 0.95 */
        left: -2.63%; /* (105.26% - 100%) / 2 */
    }
    
    .tag-filters-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .tag-filter {
        flex: 0 0 auto;
        white-space: nowrap;
    }
    .menu-item-image {
        height: 260px;
        width: 100%;
        object-fit: contain; 
        object-position: center;
    }


    /* D-tag: keep custom positioning, no crop */
    .menu-item-image.d-tag-image {
        object-position: 50% var(--image-position-y, 0%);
    }

    /* M-tag: always show the full image */
    .menu-item-image.m-tag-image {
        object-fit: contain;   /* ensures full image fits inside */
        object-position: center;
        background-color: #000000; /* optional: avoid blank edges showing black */
    }

    
    .menu-item-card {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .menu-item-card .card-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .option-selector {
        width: 100%;
        background-color: #dcd9e6;
        color: black;
        border: 1px solid #444;
        border-radius: 0.5rem;
        padding: 0.5rem;
        margin-bottom: 0.75rem;
    }
    
    .item-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
    }
    
    .modal-content {
        background-color: white;
        margin: 2rem auto;
        padding: 2rem;
        border-radius: 1rem;
        max-width: 600px;
        width: 90%;
        position: relative;
    }
    
    .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: black;
        font-size: 1.5rem;
        cursor: pointer;
    }
    
    .modal-image {
        width: 100%;
        height: 300px;
        object-fit: contain; /* CHANGED: from cover to contain */
        object-position: center;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        background-color: #f8f9fa; /* ADDED: background to prevent transparency issues */
    }
    
    .modal-option {
        margin-bottom: 1rem;
    }
    
    .modal-option label {
        display: block;
        margin-bottom: 0.5rem;
        color: rgb(12, 12, 12);
        font-weight: 600;
    }
    
    .modal-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .modal-buttons button {
        padding: 0.75rem;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
    }
    
    .add-base {
        background-color: #D62616;
        color: white;
        border: none;
    }
    
    .drinks-dropdown {
        display: none;
        background-color: #f8f9fa;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid #e2e8f0;
    }
    
    .drinks-dropdown label {
        display: block;
        margin-bottom: 0.5rem;
        color: #2d3748;
        font-weight: 600;
    }
    
    /* NEW: Burger selection styles */
    .burger-selection {
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .burger-selection h4 {
        color: black;
        margin-bottom: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
    }
    
    .burger-options-container {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .burger-option label {
        display: block;
        margin-bottom: 0.5rem;
        color: black;
        font-weight: 600;
    }
    
    @media (max-width: 767px) {
        .burger-options-container {
            gap: 1rem;
        }
    }
    
    .vegetable-selection {
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .vegetable-selection h4 {
        color: black;
        margin-bottom: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
    }
    
    .vegetable-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .vegetable-checkbox input {
        margin-right: 0.5rem;
    }
    
    .vegetable-checkbox label {
        color: black;
        cursor: pointer;
    }
    
    .home-buttons {
        justify-content: flex-start;
    }
    
    .home-info {
        justify-content: flex-start;
    }
    
    .header-logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .logo-placeholder {
        width: 50px;
        height: 50px;
        background-color: #D62616;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #121212;
    }
    
    /* UPDATED: Bigger header buttons with more spacing */
    .nav-link {
        font-size: 1.25rem !important; /* Increased from 1.1rem */
        font-weight: 600;
        padding: 0.75rem 1.25rem !important; /* Increased padding */
        transition: all 0.2s ease;
    }
    
    .nav-link:hover {
        transform: translateY(-2px);
    }
    
    /* UPDATED: Increased spacing in header nav container */
    .header-nav-container {
        display: flex;
        align-items: center;
        gap: 2rem !important; /* Increased from 1rem */
    }
    
    /* UPDATED: Bigger cart button */
    #cart-button {
        font-size: 1.1rem !important; /* Increased font size */
        padding: 0.75rem 1.5rem !important; /* Increased padding */
    }
    
    @media (max-width: 767px) {
        /* Updated mobile header layout */
        header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            min-height: 70px; /* Ensure consistent header height */
        }
        
        .mobile-menu-button {
            grid-column: 1;
            justify-self: start;
            z-index: 32;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        .header-logo-container {
            grid-column: 2;
            justify-self: center;
            position: static;
            transform: none;
            display: flex;
            justify-content: center;
            padding: 0 10px; /* Add padding to prevent touching buttons */
        }
        
        .header-logo-container img {
            height: 2.5rem;
            width: auto;
            max-width: 120px; /* Prevent logo from getting too wide */
        }
        
        .header-nav-container {
            grid-column: 3;
            justify-self: end;
            display: flex;
            justify-content: flex-end;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        /* Adjust cart button for mobile with better spacing */
        #cart-button {
            font-size: 0.875rem !important;
            padding: 0.5rem 0.75rem !important;
            white-space: nowrap;
        }
        
        /* Show only icon on very small screens, show text on larger mobile */
        #cart-count {
            display: none;
        }
        
        /* Show cart count text on slightly larger mobile screens */
        @media (min-width: 400px) {
            #cart-count {
                display: inline;
            }
            
            #cart-button {
                padding: 0.5rem 1rem !important;
            }
        }
        
        /* Additional media query for very small phones */
        @media (max-width: 360px) {
            header {
                gap: 0.5rem;
                padding: 0.5rem;
            }
            
            .header-logo-container img {
                height: 2.25rem;
            }
        }
        
        /* For larger mobile devices, add more spacing */
        @media (min-width: 500px) and (max-width: 767px) {
            header {
                gap: 1.5rem;
                padding: 0.5rem 1.5rem;
            }
        }
    }
    
    .card-input-group {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    @media (min-width: 768px) {
        .card-input-group {
            grid-template-columns: 2fr 1fr 1fr;
        }
    }

    /* NEW: Quantity selector styles - MOVED to be above buttons */
    .quantity-selector {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 1.5rem 0;
    }
    
    .quantity-selector span {
        color: black;
        font-weight: 600;
    }
    
    .quantity-controls {
        display: flex;
        align-items: center;
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        overflow: hidden;
    }
    
    .quantity-btn {
        background-color: #dcd9e6;
        color: rgb(0, 0, 0);
        border: none;
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background-color 0.2s;
    }
    
    .quantity-btn:hover {
        background-color: #6b6b6b;
    }
    
    .quantity-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .quantity-input {
        width: 3rem;
        height: 2.5rem;
        text-align: center;
        background-color: #dcd9e6;
        color: black;
        border: none;
        border-left: 1px solid #a3a3a3;
        border-right: 1px solid #a3a3a3;
        font-size: 1.1rem;
        -moz-appearance: textfield;
    }
    
    .quantity-input::-webkit-outer-spin-button,
    .quantity-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    /* NEW: Clear cart button styles */
    .cart-header-actions {
        display: flex;
        gap: 12px;
    }
    
    #clear-cart {
        color: #D62616;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    #clear-cart:hover {
        background-color: rgba(255, 106, 0, 0.1);
    }
    
    #clear-cart:disabled {
        color: #666;
        cursor: not-allowed;
    }
    
    #clear-cart:disabled:hover {
        background-color: transparent;
    }

    /* NEW: Mobile hamburger menu styles */
    .mobile-menu-button {
        display: none; /* Hidden by default on desktop */
        background: none;
        border: none;
        color: #D62616;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem;
    }

    .mobile-menu {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 100;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .mobile-menu.active {
        display: flex;
    }

    .mobile-menu nav {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
    }

    .mobile-menu .nav-link {
        font-size: 1.5rem !important;
        color: white;
        padding: 1rem 2rem !important;
    }

    .mobile-menu .nav-link.active-section {
        color: white !important;
        background-color: #D62616 !important;
    }

    .close-mobile-menu {
        position: absolute;
        top: 2rem;
        right: 2rem;
        background: none;
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
    }

    @media (max-width: 767px) {
        /* Show hamburger menu button on mobile */
        .mobile-menu-button {
            display: block !important; /* Force show on mobile */
        }
        
        .header-logo-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 31;
        }
        
        .mobile-menu-button {
            order: -1; /* This moves it to the left */
            z-index: 32;
        }
        
        .header-nav-container {
            display: flex;
            justify-content: flex-end;
            flex: 1;
        }
        
        /* Adjust header layout for mobile */
        header {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* The rest of your existing mobile styles */
        .header-logo-text {
            display: none;
        }
        
        .header-nav-container nav {
            display: none;
        }
        
        #home-content h2 {
            font-size: 3.5rem !important;
        }
        
        #home-content p {
            font-size: 1.4rem !important;
        }
    }

    /* NEW: Combo items styles */
    .combo-items-section {
        background-color: #f8f9fa !important;
        border-left: 4px solid #D62616;
    }

    .combo-items-section h4 {
        color: #D62616 !important;
        font-weight: 700;
    }

    /* NEW: Updated checkout page colors */
    .checkout-page .bg-\[\#1a1a1a\] {
        background-color: #ffffff !important;
        color: #2d3748;
    }

    .checkout-page .text-white {
        color: #2d3748 !important;
    }

    .checkout-page .bg-\[\#222\] {
        background-color: #f7fafc !important;
        color: #2d3748;
        border: 1px solid #e2e8f0;
    }

    .checkout-page input,
    .checkout-page select,
    .checkout-page textarea {
        color: #2d3748 !important;
    }

    .checkout-page input::placeholder {
        color: #a0aec0 !important;
    }

    .checkout-page .border-\[\#333\] {
        border-color: #e2e8f0 !important;
    }

    .checkout-page .text-gray-400 {
        color: #718096 !important;
    }

    .checkout-page h2,
    .checkout-page h3 {
        color: #2d3748 !important;
    }
</style>
</head>

<body class="bg-[#eae8ef] text-[#D62616]">  <!-- Image Positioning Control Panel (Hidden by default) -->
    <div class="image-control-panel">
        <h4>Image Vertical Position</h4>
        <div class="flex items-center"> <span class="image-control-value" id="position-value">0%</span> <input
                type="range" min="-30" max="30" value="0" class="image-control-slider" id="image-position-slider">
            <button id="reset-position" class="bg-[#D62616] text-white text-xs px-2 py-1 rounded">Reset</button> </div>
    </div>

<!-- Mobile Menu -->
<div id="mobile-menu" class="mobile-menu">
    <button class="close-mobile-menu">
        <i class="fas fa-times"></i>
    </button>
    <nav>
        <a class="nav-link active-section" href="#home">Home</a>
        <a class="nav-link" href="#menu">Menu</a>
        <a class="nav-link" href="#about">About</a>
        <a class="nav-link" href="#contact">Contact</a>
    </nav>
</div>

<!-- Item Modal -->
<div id="item-modal" class="item-modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <img id="modal-image" class="modal-image" src="" alt="">
        <h2 id="modal-title" class="text-black text-2xl font-bold mb-2"></h2>
        <p id="modal-description" class="text-black mb-4"></p>
        
        <div id="modal-options">
            <!-- Options will be inserted here -->
        </div>
        
        <!-- NEW: Drinks Dropdown Section -->
        <!-- NEW: Drinks Dropdown Section -->
        <div id="drinks-dropdown" class="drinks-dropdown">
            <h4>Select a Drink:</h4>
            <select id="drink-select" class="option-selector">
                <!-- Drink options will be populated from drinks.json -->
            </select>
        </div>
        
        <!-- NEW: Burger Selection Section -->
        <div id="burger-selection" class="burger-selection" style="display: none;">
            <h4>Select 2 Burgers:</h4>
            <div class="burger-options-container">
                <div class="burger-option">
                    <label>Burger 1:</label>
                    <select id="burger-select-1" class="option-selector burger-select">
                        <option value="">Select first burger...</option>
                    </select>
                </div>
                <div class="burger-option">
                    <label>Burger 2:</label>
                    <select id="burger-select-2" class="option-selector burger-select">
                        <option value="">Select second burger...</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Vegetable Selection Section -->
        <div id="vegetable-selection" class="vegetable-selection" style="display: none;">
            <h4>Select Vegetables:</h4>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-lettuce" name="vegetables" value="Lettuce">
                <label for="vegetable-lettuce">Lettuce</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-onions" name="vegetables" value="Onions">
                <label for="vegetable-onions">Onions</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-pickles" name="vegetables" value="Pickles">
                <label for="vegetable-pickles">Pickles</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-tomatoes" name="vegetables" value="Tomatoes">
                <label for="vegetable-tomatoes">Tomatoes</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-cucumber" name="vegetables" value="Cucumber">
                <label for="vegetable-cucumber">Cucumber</label>
            </div>
        </div>
        
        <!-- NEW: Quantity Selector MOVED to be above the buttons -->
        <div class="quantity-selector">
            <span>Quantity:</span>
            <div class="quantity-controls">
                <button class="quantity-btn decrease-quantity" disabled>-</button>
                <input type="number" id="modal-quantity" class="quantity-input" value="1" min="1" max="10">
                <button class="quantity-btn increase-quantity">+</button>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button id="modal-add-base" class="add-base">Add to Cart - £<span id="modal-base-price">0.00</span></button>
        </div>
    </div>
</div>

<!-- Overlay -->
<div class="overlay fixed inset-0 bg-black bg-opacity-50 z-40"></div>

<!-- Cart Drawer -->
<div class="cart-drawer fixed top-0 right-0 h-full w-80 bg-[#1a1a1a] shadow-lg z-50">
    <div class="p-4 border-b border-[#222222] flex justify-between items-center">
        <h2 class="text-white font-semibold text-lg">Your Cart</h2>
        <div class="cart-header-actions">
            <button id="clear-cart" class="text-[#D62616] hover:text-[#e05a00] disabled:text-gray-500 disabled:cursor-not-allowed" disabled>
                Clear All
            </button>
            <button id="close-cart" class="text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <div class="p-4 overflow-y-auto h-full pb-32">
        <ul id="cart-items" class="space-y-3">
            <!-- Cart items will be added here dynamically -->
        </ul>
    </div>
    <div class="absolute bottom-0 left-0 right-0 p-4 bg-[#1a1a1a] border-t border-[#222222]">
        <div class="flex justify-between text-white mb-2 text-base">
            <span class="font-semibold">Subtotal:</span>
            <span id="cart-subtotal">£0.00</span>
        </div>
        <button id="checkout-button" class="w-full bg-[#D62616] text-white text-base font-semibold rounded py-3 hover:bg-[#a01c10]">
            Checkout
        </button>
    </div>
</div>

<!-- Main Content -->
<div id="main-content">
    <!-- Updated Header with Logo Placeholder and Enhanced Navigation -->
    <header class="flex items-center justify-between px-4 sm:px-6 md:px-10 py-4 bg-white sticky top-0 z-30 header-shadow">        
        <div class="header-logo-container">
            <!-- CHANGED: Replaced text logo with image -->
            <img src="Logo.jpg" alt="HotBird" class="h-12">
        </div>
        
        <!-- NEW: Mobile hamburger menu button -->
        <button class="mobile-menu-button md:hidden">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Navigation and Cart Container -->
        <div class="header-nav-container">
            <nav class="hidden md:flex space-x-4 text-[#D62616] items-center">
                <a class="hover:text-[#a01c10] nav-link active-section" href="#home">Home</a>
                <a class="hover:text-[#a01c10] nav-link" href="#menu">Menu</a>
                <a class="hover:text-[#a01c10] nav-link" href="#about">About</a>
                <a class="hover:text-[#a01c10] nav-link" href="#contact">Contact</a>
            </nav>
            <button id="cart-button" class="flex items-center space-x-2 bg-[#D62616] text-white text-base font-semibold rounded px-4 py-2 hover:bg-[#a01c10]">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">Cart (0)</span>
            </button>
        </div>
    </header>

    <main>
        <!-- Home Section - Updated Structure with correct ID and left-aligned content -->
        <section id="home">
            <div id="home-backdrop"></div>
            <div id="home-content" class="py-12 md:py-24">
                <div class="max-w-4xl">
                    <!-- CHANGED: Increased font sizes for the heading -->
                    <h2 class="text-white text-6xl sm:text-7xl md:text-8xl font-extrabold leading-tight mb-8">
                        <span class="righteous-font block mb-2">Fryin' High</span>
                        <span class="text-[#D62616] righteous-font block">Since Day One</span>
                    </h2>
                    <!-- CHANGED: Removed horizontal padding classes -->
                    <p class="lato-font text-xl sm:text-2xl md:text-3xl text-gray-300 mb-12 leading-relaxed w-full">
                        Deliciously bold, perfectly crispy, and full of flavor, our golden fried chicken, juicy wings and crispy fries are made to satisfy every craving. Fresh ingredients, fiery taste, and fun in every bite - that's the hot bird promise.
                    </p>
                        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 mb-6 home-buttons">
                            <button id="order-now-btn" class="bg-[#D62616] text-black text-lg sm:text-xl font-semibold rounded-xl px-8 py-4 hover:bg-[#e05a00] transition-colors">
                                Order Now
                            </button>
                            <button id="view-menu-btn" class="bg-black text-white border-2 border-[#D62616] text-lg sm:text-xl font-semibold rounded-xl px-10 py-4 hover:bg-[#D62616] hover:text-black transition-colors">
                                View Menu
                            </button>
                        </div>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-12 text-xl sm:text-2xl text-gray-300 font-semibold home-info">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-star text-[#D62616] text-2xl"></i>
                            <span>4.8 Rating</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-clock text-[#D62616] text-2xl"></i>
                            <span>12PM - 2AM Daily</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Menu Section -->
        <section id="menu" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20">
            <h3 class="text-center font-semibold text- text-3xl lg:text-6xl mb-4 righteous-font">OUR MENU</h3>
            <p class="text-center text-gray-400 text-lg sm:text-xl mb-12">Discover our delicious selection of kebabs, burgers and more</p>
            
            <!-- Search and Filters -->
            <!-- Search and Filters -->
            <div class="mb-12">
                <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
                    <div class="relative w-full sm:w-80">
                        <input type="text" id="search-input" placeholder="Search menu items..." class="w-full bg-[#1a1a1a] text-white text-lg rounded-xl py-3 px-5 pl-12 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        <i class="fas fa-search absolute left-4 top-3.5 text-gray-400 text-lg"></i>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h4 class="text-center text-[#D62616] text-xl mb-4">Filter by Category</h4>
                    <div class="tag-filters-container">
                        <!-- UPDATED: Reordered filter buttons as requested -->
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black active" data-tag="all">All</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotdeals">Hot Deals</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotbuckets">Hot Buckets</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hotbirds">Hot Birds</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="wings">Wingin' it</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="hottenders">Tenders</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="sauces">Dips & Addons</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="drinks">Drinks</button>
                    </div>
                </div>
            </div>

            <div id="menu-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                <!-- Menu items will be loaded dynamically from JSON -->
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20 text-center text-lg sm:text-xl text-black leading-relaxed">
            <h3 class="font-semibold text-blacktext-3xl sm:text-4xl mb-8">Our Story</h3>
            <p class="mb-8">
                Welcome to Hot Bird, where chicken isn't just food - it's an adventure
            </p>
            <p class="mb-8">
                Crispy, juicy, and packed with bold flavors, our chicken and fries are here to make your taste buds tingle
            </p>
            <p>
                Every bite is fun, fiery, and impossible to forget.
            </p>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20 text-center text-lg sm:text-xl text-black leading-relaxed">
        <h3 class="font-semibold text-black text-3xl sm:text-4xl mb-8">Visit Us</h3>
        <p class="mb-12 text-2xl">Come and experience the taste of authentic kebabs</p>
        <div class="flex flex-col sm:flex-row justify-center gap-8">
            
            <!-- Whole address card clickable -->
            <a href="https://maps.app.goo.gl/BQyKUCf2AcjfTWvT9" target="_blank"
            class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg block hover:bg-[#F2F0EF] transition-colors">
            <i class="fas fa-map-marker-alt text-[#D62616] text-3xl mb-4"></i>
            <p>
                472 Great West Road<br>
                Hounslow, England<br>
                TW5 0JA
            </p>
            </a>

            <div class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg">
            <i class="fas fa-phone-alt text-[#D62616] text-3xl mb-4"></i>
            <p>+44 20 7998 6050</p>
            </div>

            <div class="bg-white rounded-xl p-8 w-full sm:w-64 text-lg">
            <i class="fas fa-clock text-[#D62616] text-3xl mb-4"></i>
            <p>
                MON - SUN<br>
                <span class="font-bold">12PM TIL 2AM</span>
            </p>
            </div>
        </div>
        </section>

    </main>

    <footer class="bg-[#0a0a0a] border-t border-[#222222] py-6 px-4 sm:px-6 md:px-10 text-lg text-[#D62616] font-semibold flex flex-col sm:flex-row justify-between items-center max-w-7xl mx-auto">
        <div class="mb-4 sm:mb-0">HotBird</div>
        <div class="text-gray-500 text-base">© 2023 HotBird. All rights reserved.</div>
    </footer>
</div>

<!-- Checkout Page -->
<div id="checkout-page" class="checkout-page max-w-4xl mx-auto px-4 sm:px-6 md:px-10 py-12">
    <h2 class="text-3xl sm:text-4xl font-bold text-white mb-8 text-center">Checkout</h2>
    
    <!-- Order Summary -->
    <div class="bg-[#1a1a1a] rounded-xl p-8 mb-8">
        <h3 class="text-2xl font-semibold text-white mb-6">Order Summary</h3>
        <div id="checkout-items" class="space-y-4 mb-6">
            <!-- Items will be populated here -->
        </div>
        <div class="border-t border-[#333] pt-6">
            <div class="flex justify-between text-xl text-white">
                <span class="font-semibold">Total:</span>
                <span id="checkout-total" class="font-bold">£0.00</span>
            </div>
        </div>
    </div>
    
    <!-- Checkout Form -->
    <form id="checkout-form" class="bg-[#1a1a1a] rounded-xl p-8">
        <h3 class="text-2xl font-semibold text-white mb-8">Customer Information</h3>
        
        <!-- NEW: Delivery Type Dropdown -->
        <div class="mb-6">
            <label for="delivery-type" class="block text-white mb-3 text-lg">Order Type</label>
            <select id="delivery-type" class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg">
                <option value="">Select order type...</option>
                <option value="collection">Collection</option>
            </select>
            <p class="text-amber-500 text-sm mt-2 font-semibold"> </p>  <!-- Note replaced Collection only Keep for later -->
        </div>

        <!-- NEW: Container for fields that will be shown on selection -->
        <div id="details-container" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="full-name" class="block text-white mb-3 text-lg">Full Name</label>
                    <input type="text" id="full-name" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
                </div>
                <div>
                    <label for="phone" class="block text-white mb-3 text-lg">Phone Number</label>
                    <input type="tel" id="phone" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
                </div>
            </div>
            
            <div class="mb-6">
                <label for="email" class="block text-white mb-3 text-lg">Email Address</label>
                <input type="email" id="email" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input">
            </div>
            
            <!-- Card Details Section -->
            <div class="mb-6">
                <label class="block text-white mb-3 text-lg">Card Details</label>
                <div class="card-input-group">
                    <div>
                        <input type="text" id="card-number" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input" placeholder="Card Number">
                    </div>
                    <div>
                        <input type="text" id="card-expiry" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input" placeholder="MM/YY">
                    </div>
                    <div>
                        <input type="text" id="card-cvv" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg checkout-input" placeholder="CVV">
                    </div>
                </div>
            </div>
            
            <div class="mb-8">
                <label for="special-instructions" class="block text-white mb-3 text-lg">Special Instructions (Optional)</label>
                <textarea id="special-instructions" class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] h-24 text-lg"></textarea>
            </div>
        </div>
        <!-- NEW: Pickup Time Selector -->
        <div class="mb-8" id="pickup-time-container" style="display: none;">
        <label for="pickup-time" class="block text-white mb-3 text-lg">Select Pickup Time</label>
        <select id="pickup-time" required class="w-full bg-[#222] text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616] text-lg">
            <option value="">Loading times...</option>
        </select>
        </div>            
        <button type="submit" id="place-order-btn" class="w-full bg-[#D62616] text-white text-xl font-bold rounded-lg py-4 hover:bg-[#e05a00] disabled:bg-gray-600 disabled:cursor-not-allowed" disabled>
            Place Order – £0.00
        </button>
    </form>
    
    <div class="text-center mt-8">
        <button id="back-to-menu" class="text-[#D62616] hover:underline text-lg">
            ← Back to Menu
        </button>
    </div>
</div>

<!-- Order Confirmation Modal -->
<div id="order-confirmation" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
    <div class="bg-[#1a1a1a] rounded-xl p-8 max-w-md w-full mx-4">
        <div class="text-center">
            <i class="fas fa-check-circle text-[#D62616] text-5xl mb-4"></i>
            <h3 class="text-2xl font-bold text-white mb-2">Order Confirmed!</h3>
            <p class="text-gray-300 mb-6" id="confirmation-message">Thank you for your order. We'll start preparing it right away.</p>
            <button id="confirm-ok" class="bg-[#D62616] text-white font-semibold rounded-lg px-6 py-3 hover:bg-[#e05a00]">
                OK
            </button>
        </div>
    </div>
</div>

<script>
    // Leave empty for now. When backend is ready, put its URL here.
    const API_BASE = ''; // e.g. 'https://api.yoursite.com'

    // Helper: returns either the local file or the API endpoint.
    function getJsonUrl(file) {
    return API_BASE ? `${API_BASE}/${file}` : file;
    }

    // NEW: Maximum quantity per item (easily changeable)
    const MAX_QUANTITY_PER_ITEM = 10;

    // Dip options (changed from sauceOptions to dipOptions)
    const dipOptions = {
        "hotbuckets": ["Burger Blast", "Butter Ranch", "Garlic Gurb", "Habanero Mayo", "Siracha Heat", "Smookey BBQ", "Tomato Splash", "Buffalo Kick", "Mango Habenero"],
        "hotbirds": ["Burger Blast", "Butter Ranch", "Garlic Gurb", "Habanero Mayo", "Siracha Heat", "Smookey BBQ", "Tomato Splash", "Buffalo Kick", "Mango Habenero"],
        "wings": ["Mango & Lime", "Korean BBQ", "Peri Peri", "Mango Habanero", "Hot Honey Siracha", "Buffalo Kick"],
        "hottenders": ["Burger Blast", "Butter Ranch", "Garlic Gurb", "Habanero Mayo", "Siracha Heat", "Smookey BBQ", "Tomato Splash", "Buffalo Kick", "Mango Habenero"]
    };

    // Fixed drink options for the dropdown
    const fixedDrinkOptions = [
        "Pepsi",
        "Diet Pepsi",
        "Sprite",
        "Diet Sprite",
        "7up",
        "Diet 7up",
        "Coke Cola",
        "Coke Zero",
        "Diet Coca-Cola"
    ];

    // Drinks options - using fixed list instead of drinks.json
    let drinkOptions = fixedDrinkOptions;

    // Burger options for burger selection dropdown
    const burgerOptions = [
        "Nash Hot Bird Burger",
        "Nash Crunch Burger", 
        "Hot Honey Siracha Burger",
        "Korean BBQ Burger",
        "Buffalo Chicken Burger"
    ];

    // Vegetables options (unchanged)
    const vegetableOptions = [
        "Lettuce", "Onions", "Pickles", "Tomatoes", "Cucumber"
    ];

    // JSON files to load (ADDED drinks.json back)
    const jsonFiles = [
        "hotbuckets.json",
        "hotbirds.json", 
        "wings.json",
        "sauces.json",
        "hot-tenders.json",
        "hot-deals.json",
        "drinks.json"  // ADDED THIS LINE BACK
    ];

    let menuData = {};

    // Load all external JSON files
    async function loadAllJSON() {
        for (const file of jsonFiles) {
            try {
                const response = await fetch(getJsonUrl(file));
                if (!response.ok) throw new Error(`Failed to load ${file}`);
                const data = await response.json();
                menuData[file] = data;
            } catch (err) {
                console.error(`Error loading ${file}:`, err);
            }
        }
        // Load pickup-times.json
        try {
            const response = await fetch(getJsonUrl("pickup-times.json"));
            if (!response.ok) throw new Error("Failed to load pickup-times.json");
            const data = await response.json();
            pickupTimes = data.times || [];

            pickupTimeDropdown.innerHTML = '<option value="">Select a pickup time...</option>';
            pickupTimes.forEach(time => {
                const opt = document.createElement("option");
                opt.value = time;
                opt.textContent = time;
                pickupTimeDropdown.appendChild(opt);
            });
        } catch (err) {
            console.error("Error loading pickup-times.json:", err);
            pickupTimeDropdown.innerHTML = '<option value="">Pickup times unavailable</option>';
        }           
    }

    // Cart functionality
    let cart = [];
    const cartButton = document.getElementById('cart-button');
    const closeCart = document.getElementById('close-cart');
    const cartDrawer = document.querySelector('.cart-drawer');
    const overlay = document.querySelector('.overlay');
    const cartItems = document.getElementById('cart-items');
    const cartSubtotal = document.getElementById('cart-subtotal');
    const cartCount = document.getElementById('cart-count');
    const menuContainer = document.getElementById('menu-container');
    const searchInput = document.getElementById('search-input');
    const tagFilters = document.querySelectorAll('.tag-filter');
    const checkoutButton = document.getElementById('checkout-button');
    const orderNowButton = document.getElementById('order-now-btn');
    const viewMenuButton = document.getElementById('view-menu-btn');
    const mainContent = document.getElementById('main-content');
    const checkoutPage = document.getElementById('checkout-page');
    const backToMenuButton = document.getElementById('back-to-menu');
    const checkoutItems = document.getElementById('checkout-items');
    const checkoutTotal = document.getElementById('checkout-total');
    const placeOrderButton = document.getElementById('place-order-btn');
    const checkoutForm = document.getElementById('checkout-form');
    const orderConfirmation = document.getElementById('order-confirmation');
    const confirmOkButton = document.getElementById('confirm-ok');
    
    // NEW: Checkout form elements
    const deliveryTypeDropdown = document.getElementById('delivery-type');
    const detailsContainer = document.getElementById('details-container');
    const checkoutInputs = document.querySelectorAll('.checkout-input');

    // Modal elements
    const itemModal = document.getElementById('item-modal');
    const modalImage = document.getElementById('modal-image');
    const modalTitle = document.getElementById('modal-title');
    const modalDescription = document.getElementById('modal-description');
    const modalOptions = document.getElementById('modal-options');
    const modalBasePrice = document.getElementById('modal-base-price');
    const modalAddBase = document.getElementById('modal-add-base');
    const closeModal = document.querySelector('.close-modal');
    const vegetableSelection = document.getElementById('vegetable-selection');
    // NEW: Drinks dropdown elements
    const drinksDropdown = document.getElementById('drinks-dropdown');
    const drinkSelect = document.getElementById('drink-select');
    // NEW: Burger selection elements
    const burgerSelection = document.getElementById('burger-selection');
    const burgerSelect1 = document.getElementById('burger-select-1');
    const burgerSelect2 = document.getElementById('burger-select-2');
    // NEW: Pickup time dropdown
    const pickupTimeContainer = document.getElementById('pickup-time-container');
    const pickupTimeDropdown = document.getElementById('pickup-time');
    let pickupTimes = [];

    // NEW: Quantity selector elements
    const quantityInput = document.getElementById('modal-quantity');
    const decreaseQuantityBtn = document.querySelector('.decrease-quantity');
    const increaseQuantityBtn = document.querySelector('.increase-quantity');
    
    // Image positioning controls
    const imagePositionSlider = document.getElementById('image-position-slider');
    const positionValue = document.getElementById('position-value');
    const resetPositionButton = document.getElementById('reset-position');
    const imageControlPanel = document.querySelector('.image-control-panel');

    // NEW: Clear cart button
    const clearCartButton = document.getElementById('clear-cart');

    // NEW: Mobile menu elements
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMobileMenu = document.querySelector('.close-mobile-menu');
    const mobileNavLinks = mobileMenu.querySelectorAll('.nav-link');

    // Current item being viewed in modal
    let currentModalItem = null;

    // NEW: Function to render combo items in modal
    function renderComboItems(comboItems) {
        if (!comboItems || comboItems.length === 0) return '';
        
        let html = '<div class="combo-items-section mt-4 p-4 bg-gray-100 rounded-lg">';
        html += '<h4 class="font-semibold text-black mb-3">Combo Includes:</h4>';
        html += '<ul class="space-y-2">';
        
        comboItems.forEach(item => {
            const optionText = item.option ? ` (${item.option})` : '';
            html += `
                <li class="flex justify-between items-center text-sm">
                    <span class="text-black">${item.quantity}x ${item.name}${optionText}</span>
                    <span class="text-green-600 font-semibold"></span>
                </li>
            `;
        });
        
        html += '</ul></div>';
        return html;
    }

    // Load menu items from JSON data
    function loadMenuItems() {
        let allItems = [];
        let showSliderPanel = false;
        
        // Simulate loading from multiple JSON files
        for (const fileName in menuData) {
            if (menuData.hasOwnProperty(fileName)) {
                allItems = allItems.concat(menuData[fileName].items);
                
                // Check if any item has showSlider set to true
                if (menuData[fileName].items.some(item => item.showSlider)) {
                    showSliderPanel = true;
                }
            }
        }
        
        // Show slider panel if any item has showSlider: true
        if (showSliderPanel) {
            imageControlPanel.style.display = 'block';
        }
        
        renderMenuItems(allItems);
    }

    // Render menu items to the page
    function renderMenuItems(items) {
        menuContainer.innerHTML = '';
        
        if (items.length === 0) {
            menuContainer.innerHTML = '<p class="text-center text-gray-400 col-span-full py-8 text-lg">No menu items found matching your criteria.</p>';
            return;
        }
        
        items.forEach(item => {
            const article = document.createElement('article');
            article.className = 'bg-[#1a1a1a] rounded-xl overflow-hidden shadow-md text-base menu-item-card';
            
            // Check if item has options
            const hasOptions = item.options && item.options.length > 0;

            // Check tags separately
            const hasDTag = item.tags.includes("D");
            const hasMTag = item.tags.includes("M");

            article.innerHTML = `
                <div class="relative">
                    <img 
                        alt="${item.name}" 
                        class="menu-item-image ${hasDTag ? 'd-tag-image' : ''} ${hasMTag ? 'm-tag-image' : ''}" 
                        src="${item.image}">
                    <span class="absolute top-3 left-3 bg-[#D62616] text-white text-xs font-semibold uppercase rounded px-2 py-1">
                        ${item.tags[0]}
                    </span>
                </div>
                <div class="p-4 card-content">
                    <h4 class="font-semibold text-white mb-2 text-lg">${item.name}</h4>
                    <p class="text-gray-400 mb-3 text-sm">${item.description}</p>
                    <div class="flex justify-between items-center mt-auto pt-2">
                        <span class="text-[#D62616] font-semibold text-lg">
                            ${hasOptions ? `From £${Math.min(...item.options.map(o => o.price)).toFixed(2)}` : `£${item.price.toFixed(2)}`}
                        </span>
                    </div>
                </div>
            `;
            
            // Add click event to open modal
            article.addEventListener('click', () => {
                openItemModal(item);
            });
            
            menuContainer.appendChild(article);
        });
    }

    // Open modal for a menu item
    function openItemModal(item) {
        currentModalItem = item;

        // Reset quantity to 1
        quantityInput.value = 1;
        updateQuantityButtons();

        // Reset drinks dropdown
        drinksDropdown.style.display = 'none';
        drinkSelect.innerHTML = '';

        // NEW: Reset burger selection
        burgerSelection.style.display = 'none';
        burgerSelect1.innerHTML = '<option value="">Select first burger...</option>';
        burgerSelect2.innerHTML = '<option value="">Select second burger...</option>';
        burgerSelect1.value = '';
        burgerSelect2.value = '';

        // Reset vegetable selection
        document.querySelectorAll('input[name="vegetables"]').forEach(checkbox => {
            checkbox.checked = false;
        });

        // Show or hide vegetable selection based on item
        if (item.vegetables) {
            vegetableSelection.style.display = 'block';
        } else {
            vegetableSelection.style.display = 'none';
        }

        // NEW: Show or hide drinks dropdown based on item
        if (item.showDrinksDropdown) {
            drinksDropdown.style.display = 'block';
            // Populate drinks dropdown
            drinkOptions.forEach(drink => {
                const option = document.createElement('option');
                option.value = drink;
                option.textContent = drink;
                drinkSelect.appendChild(option);
            });
        }

        // NEW: Show or hide burger selection based on item
        if (item.showBurgerSelection !== false && item.tags.includes("hotdeals")) {
            burgerSelection.style.display = 'block';
            // Populate burger dropdowns
            burgerOptions.forEach(burger => {
                const option1 = document.createElement('option');
                option1.value = burger;
                option1.textContent = burger;
                burgerSelect1.appendChild(option1.cloneNode(true));
                
                const option2 = document.createElement('option');
                option2.value = burger;
                option2.textContent = burger;
                burgerSelect2.appendChild(option2);
            });
        } else {
            burgerSelection.style.display = 'none';
        }

        // Set modal content
        modalImage.src = item.image;
        modalTitle.textContent = item.name;
        modalDescription.textContent = item.description;

        // Clear previous options
        modalOptions.innerHTML = '';

        // NEW: Add combo items display if it's a combo
        if (item.comboItems && item.comboItems.length > 0) {
            // Remove any old combo display before adding a new one
            const existingCombo = document.querySelector('.combo-items-section');
            if (existingCombo) existingCombo.remove();

            const comboItemsHTML = renderComboItems(item.comboItems);
            modalDescription.insertAdjacentHTML('afterend', comboItemsHTML);
        }

        // ----- OPTIONS LOGIC -----
        const hasOptions = item.options && item.options.length > 0;
        let selectedOptionIndex = 0;
        let basePrice = hasOptions ? item.options[0].price : item.price;

        if (hasOptions) {
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'modal-option';

            // check if all options same price
            const allSamePrice = item.options.every(
                opt => opt.price === item.options[0].price
            );

            optionsDiv.innerHTML = `
                <label for="modal-option-select">Choose:</label>
                <select id="modal-option-select" class="option-selector">
                    ${item.options
                        .map(
                            (option, index) => `
                        <option value="${index}" data-price="${option.price}">
                            ${
                                allSamePrice
                                    ? option.name
                                    : `${option.name} - £${option.price.toFixed(2)}`
                            }
                        </option>
                    `
                        )
                        .join('')}
                </select>
            `;
            modalOptions.appendChild(optionsDiv);

            // bind AFTER element exists
            const optionSelect = optionsDiv.querySelector('#modal-option-select');
            optionSelect.addEventListener('change', e => {
                selectedOptionIndex = parseInt(e.target.value, 10);
                basePrice = item.options[selectedOptionIndex].price;
                updateModalPrices(item, basePrice);
            });
        } else {
            basePrice = item.price;
        }

        // ----- DIPS ----- (changed from sauces)
        if (item.sauces) {
            // Find the category for dip options
            let dipCategory = item.tags.find(tag =>
                dipOptions.hasOwnProperty(tag)
            );

            // FIX: If no specific category found but sauces is true, use hotbuckets as default
            if (!dipCategory) {
                dipCategory = "hotbuckets"; // Default category for items with sauces: true
            }

            if (dipCategory && dipOptions[dipCategory]) {
                const dipDiv = document.createElement('div');
                dipDiv.className = 'modal-option';

                // UPDATED: Determine the label text based on category - Changed for Hot Tenders
                let labelText = 'Dip';
                if (dipCategory === 'wings') {
                    labelText = 'Flavour';
                } else if (dipCategory === 'hottenders') {
                    labelText = 'Dips'; // Changed from 'Flavour' to 'Dips' for Hot Tenders
                }

                dipDiv.innerHTML = `
                    <label for="modal-dip-select">${labelText}:</label>
                    <select id="modal-dip-select" class="option-selector">
                        ${dipOptions[dipCategory]
                            .map(
                                dip => `<option value="${dip}">${dip}</option>`
                            )
                            .join('')}
                    </select>
                `;
                modalOptions.appendChild(dipDiv);
            }
        }

        // Update prices initially
        updateModalPrices(item, basePrice);

        // Show modal
        itemModal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    // NEW: Update quantity buttons state
    function updateQuantityButtons() {
        const quantity = parseInt(quantityInput.value);
        decreaseQuantityBtn.disabled = quantity <= 1;
        increaseQuantityBtn.disabled = quantity >= MAX_QUANTITY_PER_ITEM;
    }

    // Update prices in modal
    function updateModalPrices(item, basePrice) {
        const quantity = parseInt(quantityInput.value);
        modalBasePrice.textContent = (basePrice * quantity).toFixed(2);
    }

    // Close modal
    function closeItemModal() {
        itemModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        currentModalItem = null;
    }

    // Find menu item by name
    function findMenuItemByName(name) {
        for (const fileName in menuData) {
            if (menuData.hasOwnProperty(fileName)) {
                const item = menuData[fileName].items.find(item => item.name === name);
                if (item) return item;
            }
        }
        return null;
    }

    // Filter menu items based on search and tags - FIXED VERSION
    function filterMenuItems() {
        const searchTerm = searchInput.value.toLowerCase();
        const activeTag = document.querySelector('.tag-filter.active')?.getAttribute('data-tag') || 'all';
        
        let allItems = [];
        for (const fileName in menuData) {
            if (menuData.hasOwnProperty(fileName)) {
                allItems = allItems.concat(menuData[fileName].items);
            }
        }
        
        let filteredItems = allItems.filter(item => {
            const matchesSearch = item.name.toLowerCase().includes(searchTerm) || 
                                item.description.toLowerCase().includes(searchTerm);
            
            let matchesTag = activeTag === 'all';
            
            // Check if item has the active tag
            if (activeTag !== 'all') {
                matchesTag = item.tags.includes(activeTag);
            }
            
            return matchesSearch && matchesTag;
        });
        
        renderMenuItems(filteredItems);
    }

    // Add item to cart from modal
    function addToCartFromModal() {
        if (!currentModalItem) return;
        
        const quantity = parseInt(quantityInput.value);
        const hasOptions = currentModalItem.options && currentModalItem.options.length > 0;
        let selectedOption = null;
        let selectedDip = null;
        let selectedVegetables = [];
        let selectedDrink = null;
        let basePrice = currentModalItem.price;
        
        // Get selected option if exists
        if (hasOptions) {
            const optionSelect = document.getElementById('modal-option-select');
            const optionIndex = parseInt(optionSelect.value);
            selectedOption = currentModalItem.options[optionIndex].name;
            basePrice = currentModalItem.options[optionIndex].price;
        }
        
        // Get selected dip if exists (changed from sauce)
        if (currentModalItem.sauces) {
            const dipSelect = document.getElementById('modal-dip-select');
            if (dipSelect) {
                selectedDip = dipSelect.value;
            }
        }
        
        // Get selected vegetables if applicable
        if (currentModalItem.vegetables) {
            const vegetableCheckboxes = document.querySelectorAll('input[name="vegetables"]:checked');
            selectedVegetables = Array.from(vegetableCheckboxes).map(cb => cb.value);
        }
        
        // NEW: Get selected drink if applicable
        if (currentModalItem.showDrinksDropdown) {
            selectedDrink = drinkSelect.value;
        }

        // NEW: Get selected burgers if applicable
        let selectedBurgers = [];
        if (currentModalItem.showBurgerSelection !== false && currentModalItem.tags.includes("hotdeals")) {
            const burger1 = burgerSelect1.value;
            const burger2 = burgerSelect2.value;
            
            // Validate burger selection
            if (!burger1 || !burger2) {
                alert('Please select both burgers to continue.');
                return;
            }
            
            selectedBurgers = [burger1, burger2];
        }
        
        const price = basePrice;
        
        let displayName = currentModalItem.name;
        if (selectedOption) displayName += ` (${selectedOption})`;
        if (selectedDip) displayName += ` with ${selectedDip}`;
        if (selectedVegetables.length > 0) displayName += ` with ${selectedVegetables.join(', ')}`;
        // NEW: Add drink to display name if selected
        if (selectedDrink) displayName += ` with ${selectedDrink}`;
        // NEW: Add burgers to display name if selected
        if (selectedBurgers.length > 0) {
            displayName += ` with burgers: ${selectedBurgers.join(' & ')}`;
        }
        
        // NEW: Add combo indicator for receipt
        if (currentModalItem.comboItems && currentModalItem.comboItems.length > 0) {
            displayName += ` [Combo Deal]`;
        }

        // Check if item already exists in cart
        const existingItem = cart.find(item => item.name === displayName);
        
        if (existingItem) {
            existingItem.quantity += quantity;
        } else {
            const cartItem = {
                name: displayName,
                price,
                quantity,
                selectedOption,
                selectedDip,
                selectedVegetables,
                selectedDrink: selectedDrink
            };
            
            // NEW: Store combo items for backend processing
            if (currentModalItem.comboItems && currentModalItem.comboItems.length > 0) {
                cartItem.isCombo = true;
                cartItem.comboItems = currentModalItem.comboItems;
            }
            
            // NEW: Store selected burgers for backend processing
            if (selectedBurgers.length > 0) {
                cartItem.selectedBurgers = selectedBurgers;
            }
            
            cart.push(cartItem);
        }
        
        updateCart();
        closeItemModal();
        openCartDrawer();
    }

    // Open cart drawer
    function openCartDrawer() {
        cartDrawer.classList.add('open');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close cart drawer
    function closeCartDrawer() {
        cartDrawer.classList.remove('open');
        overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    // Update cart display
    function updateCart() {
        // Clear current items
        cartItems.innerHTML = '';
        
        let total = 0;
        let count = 0;
        
        // Add items to cart display
        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            total += itemTotal;
            count += item.quantity;
            
            const li = document.createElement('li');
            li.className = 'flex justify-between items-center text-white text-sm border-b border-[#222222] pb-3';
            li.innerHTML = `
                <div>
                    <div class="font-semibold">${item.quantity} x ${item.name}</div>
                    <div class="text-[#D62616]">£${item.price.toFixed(2)} each</div>
                </div>
                <div class="flex items-center">
                    <span class="font-semibold mr-3">£${itemTotal.toFixed(2)}</span>
                    <button class="remove-item text-red-500 hover:text-red-700" data-name="${item.name}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            cartItems.appendChild(li);
        });
        
        // Update subtotal and count
        cartSubtotal.textContent = `£${total.toFixed(2)}`;
        cartCount.textContent = `Cart (${count})`;
        
        // Enable/disable clear cart button based on whether cart has items
        clearCartButton.disabled = cart.length === 0;
        
        // Update checkout button text
        placeOrderButton.textContent = `Place Order – £${total.toFixed(2)}`;
        
        // Add event listeners to remove buttons
        document.querySelectorAll('.remove-item').forEach(button => {
            button.addEventListener('click', (e) => {
                const name = e.currentTarget.getAttribute('data-name');
                removeFromCart(name);
            });
        });
    }

    // Remove item from cart
    function removeFromCart(name) {
        const itemIndex = cart.findIndex(item => item.name === name);
        
        if (itemIndex !== -1) {
            cart.splice(itemIndex, 1);
            updateCart();
        }
    }

    // NEW: Clear entire cart
    function clearCart() {
        cart = [];
        updateCart();
    }

    // Show checkout page
    function showCheckoutPage() {
        if (cart.length === 0) {
            const customAlert = document.createElement('div');
            customAlert.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1001; display: flex; align-items: center; justify-content: center;">
                    <div style="background: #1a1a1a; padding: 2rem; border-radius: 1rem; text-align: center; color: white;">
                        <p class="mb-4">Your cart is empty. Please add some items before checkout.</p>
                        <button id="custom-alert-ok" style="background: #D62616; color: white; padding: 0.5rem 1rem; border-radius: 0.5rem;">OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(customAlert);
            document.getElementById('custom-alert-ok').onclick = () => customAlert.remove();
            return;
        }

        // NEW: Close cart drawer when proceeding to checkout
        closeCartDrawer();
        
        mainContent.style.display = 'none';
        checkoutPage.style.display = 'block';

        // Populate checkout items
        checkoutItems.innerHTML = '';
        let total = 0;

        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            total += itemTotal;

            const div = document.createElement('div');
            div.className = 'flex justify-between items-center';
            div.innerHTML = `
                <div class="flex-1">
                    <div class="font-semibold">${item.quantity} x ${item.name}</div>
                    <div class="text-sm text-gray-400">£${item.price.toFixed(2)} each</div>
                </div>
                <div class="font-semibold">£${itemTotal.toFixed(2)}</div>
            `;

            checkoutItems.appendChild(div);
        });

        checkoutTotal.textContent = `£${total.toFixed(2)}`;
        placeOrderButton.textContent = `Place Order – £${total.toFixed(2)}`;
        
        // NEW: Reset checkout form state
        deliveryTypeDropdown.value = '';
        detailsContainer.style.display = 'none';
        placeOrderButton.disabled = true;
    }

    // Show main content
    function showMainContent() {
        checkoutPage.style.display = 'none';
        mainContent.style.display = 'block';
    }
    
    // NEW: Check if all required fields are filled to enable the place order button
    function checkFormValidity() {
        let allFilled = true;

        checkoutInputs.forEach(input => {
            if (!input.value.trim()) {
                allFilled = false;
            }
        });

        if (deliveryTypeDropdown.value === 'collection') {
            if (!pickupTimeDropdown.value.trim()) {
                allFilled = false;
            }
        }

        placeOrderButton.disabled = !allFilled;
    }

    function buildItemsForBackend(cart) {
        const backendItems = [];

        cart.forEach(item => {
            // Handle combo items separately
            if (item.isCombo && item.comboItems) {
                // Add the main combo item
                backendItems.push({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    isCombo: true,
                    comboItems: item.comboItems
                });
            } 
            // Handle regular items with drinks
            else if (item.selectedDrink) {
                // main item without the drink
                backendItems.push({
                    name: item.name.replace(/ with .*$/, ''),
                    price: item.price,
                    quantity: item.quantity,
                    selectedOption: item.selectedOption,
                    selectedDip: item.selectedDip,
                    selectedVegetables: item.selectedVegetables,
                    selectedDrink: item.selectedDrink
                });
            } else {
                backendItems.push({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    selectedOption: item.selectedOption,
                    selectedDip: item.selectedDip,
                    selectedVegetables: item.selectedVegetables
                });
            }
        });

        return backendItems;
    }

    // Handle form submission
    async function handleFormSubmit(e) {
    e.preventDefault();

    // Check validity one last time before submitting
    checkFormValidity();
    if (placeOrderButton.disabled) {
        return;
    }

    // collect order data to send to backend if needed
    const deliveryType = document.getElementById('delivery-type').value;
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const order = {
        deliveryType,
        customer: {
            fullName: document.getElementById('full-name').value,
            phone: document.getElementById('phone').value,
            email: document.getElementById('email').value,
            specialInstructions: document.getElementById('special-instructions').value
        },
        pickupTime: pickupTimeDropdown.value,   // ✅ new field
        items: buildItemsForBackend(cart),
        total: total.toFixed(2)
    };

    const confirmationMessage = document.getElementById('confirmation-message');
    const orderConfirmation   = document.getElementById('order-confirmation');

    // send to backend only if API_BASE is set
    if (API_BASE) {
        try {
            const response = await fetch(`${API_BASE}/orders`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(order)
            });
            if (!response.ok) throw new Error('Order failed');
            const data = await response.json();

            // e.g. {status:"approved", message:"Ready at 7:30pm"}
            if (data.status === 'approved') {
                if (deliveryType === 'collection' && pickupTimeDropdown.value) {
                    confirmationMessage.textContent = data.message || `Your order is approved! Pickup at ${pickupTimeDropdown.value}.`;
                } else {
                    confirmationMessage.textContent = data.message || 'Your order has been approved.';
                }
            } else if (data.status === 'denied') {
                confirmationMessage.textContent = data.message || 'Sorry, your order could not be processed.';
            } else {
                confirmationMessage.textContent = 'Unexpected reply from server.';
            }
        } catch (err) {
            confirmationMessage.textContent = 'There was a problem sending your order.';
        }
    } else {
        // current 2-second fake message stays for local demo
        setTimeout(() => {
            if (deliveryType === 'collection') {
                confirmationMessage.textContent = `Your order has been placed successfully for pickup at ${pickupTimeDropdown.value}.`;
            } else {
                confirmationMessage.textContent = 'Your order has been placed successfully!';
            }
        }, 2000);
    }
    orderConfirmation.classList.remove('hidden');
    }
    
    // Handle image position adjustment
    function updateImagePosition(value) {
        document.documentElement.style.setProperty('--image-position-y', value + '%');
        positionValue.textContent = value + '%';
    }
    
    // NEW: Scroll spy functionality - SIMPLIFIED AND WORKING
    function initScrollSpy() {
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');
        
        function updateActiveLink() {
            let current = '';
            const scrollPos = window.pageYOffset;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    current = sectionId;
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active-section');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active-section');
                }
            });
        }
        
        window.addEventListener('scroll', updateActiveLink);
        // Initial call to set active section on page load
        updateActiveLink();
    }

    // NEW: Mobile menu functionality
    function initMobileMenu() {
        // Toggle mobile menu
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        
        // Close mobile menu
        closeMobileMenu.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
        
        // Close mobile menu when clicking on a link
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
        });
    }

    // Initialize the application
    async function init() {
        await loadAllJSON();
        loadMenuItems();
        updateCart();
        
        // Initialize scroll spy
        initScrollSpy();
        
        // Initialize mobile menu
        initMobileMenu();
        
        // Event listeners
        cartButton.addEventListener('click', openCartDrawer);
        closeCart.addEventListener('click', closeCartDrawer);
        overlay.addEventListener('click', closeCartDrawer);
        closeModal.addEventListener('click', closeItemModal);
        modalAddBase.addEventListener('click', addToCartFromModal);
        searchInput.addEventListener('input', filterMenuItems);
        checkoutButton.addEventListener('click', showCheckoutPage);
        orderNowButton.addEventListener('click', showCheckoutPage);
        viewMenuButton.addEventListener('click', () => {
            document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
        });
        backToMenuButton.addEventListener('click', showMainContent);
        checkoutForm.addEventListener('submit', handleFormSubmit);
        confirmOkButton.addEventListener('click', () => {
            orderConfirmation.classList.add('hidden');
            showMainContent();
            clearCart();
        });
        
        // NEW: Quantity selector event listeners
        decreaseQuantityBtn.addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity > 1) {
                quantityInput.value = quantity - 1;
                updateQuantityButtons();
                updateModalPrices(currentModalItem, currentModalItem.price);
            }
        });
        
        increaseQuantityBtn.addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity < MAX_QUANTITY_PER_ITEM) {
                quantityInput.value = quantity + 1;
                updateQuantityButtons();
                updateModalPrices(currentModalItem, currentModalItem.price);
            }
        });
        
        quantityInput.addEventListener('change', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity < 1) quantityInput.value = 1;
            if (quantity > MAX_QUANTITY_PER_ITEM) quantityInput.value = MAX_QUANTITY_PER_ITEM;
            updateQuantityButtons();
            updateModalPrices(currentModalItem, currentModalItem.price);
        });
        
        // NEW: Image position slider
        imagePositionSlider.addEventListener('input', (e) => {
            updateImagePosition(e.target.value);
        });
        
        resetPositionButton.addEventListener('click', () => {
            updateImagePosition(50);
            imagePositionSlider.value = 50;
        });
        
        // NEW: Clear cart button
        clearCartButton.addEventListener('click', clearCart);
        
        // NEW: Tag filter event listeners
        tagFilters.forEach(filter => {
            filter.addEventListener('click', () => {
                // Remove active class from all filters
                tagFilters.forEach(f => f.classList.remove('active'));
                // Add active class to clicked filter
                filter.classList.add('active');
                filterMenuItems();
            });
        });
        
        // NEW: Delivery type dropdown event listener
        deliveryTypeDropdown.addEventListener('change', (e) => {
            if (e.target.value === 'collection') {
                detailsContainer.style.display = 'block';
                pickupTimeContainer.style.display = 'block';
            } else if (e.target.value === 'delivery') {
                detailsContainer.style.display = 'block';
                pickupTimeContainer.style.display = 'none';
            } else {
                detailsContainer.style.display = 'none';
                pickupTimeContainer.style.display = 'none';
            }
            checkFormValidity();
        });
        
        // NEW: Check form validity on input
        checkoutInputs.forEach(input => {
            input.addEventListener('input', checkFormValidity);
        });
        
        pickupTimeDropdown.addEventListener('change', checkFormValidity);
    }

    // Start the application
    init();
</script>
</body>

</html>
