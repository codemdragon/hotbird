<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotBird</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <!-- Import all required fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sigmar&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Xuong&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Maiden+Orange&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            --image-position-y: 0%;
        }

    .header-logo-text {
        font-family: 'Xuong', sans-serif;
    }

    .header-shadow {
    border-bottom: none !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 
                0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    .righteous-font {
        font-family: 'Righteous', cursive;
    }
    
    .lato-font {
        font-family: 'Lato', sans-serif;
    }

    .cart-drawer {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
    }
    
    .cart-drawer.open {
        transform: translateX(0);
    }
    
    .overlay {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out;
    }
    
    .overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    .active-section {
        color: white !important;
        background-color: #D62616 !important;
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
    }
    
    .tag-filter.active {
        background-color: #D62616;
        color: black;
    }
    
    .menu-item-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
        background-color: white !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .menu-item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(214, 38, 22, 0.7);
    }
    
    .menu-item-card h4 {
    color: black !important;
    }

    .menu-item-card p {
        color: black !important;
    }

    .menu-item-card .text-\[#D62616\] {
        color: white !important;
    }
        
    .checkout-page {
        display: none;
    }
    
    .image-control-panel {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(26, 26, 26, 0.9);
        padding: 15px;
        border-radius: 10px;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        border: 1px solid #333;
        display: none;
    }
    
    .image-control-panel h4 {
        margin: 0 0 10px 0;
        color: #D62616;
        font-size: 14px;
        text-align: center;
    }
    
    .image-control-slider {
        width: 200px;
        margin: 0 10px;
    }
    
    .image-control-value {
        color: white;
        font-size: 12px;
        min-width: 40px;
        text-align: center;
    }
    
    /* Updated home section for 150% scaling */
    #home {
        position: relative;
        width: 100%;
        overflow: hidden;
        /* Default background for desktop */
        background-image: url('BACKDROPP.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    /* Mobile background image */
    @media (max-width: 767px) {
        #home {
            background-image: url('backdropm.jpg');
        }
    }

    #home-backdrop {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3); /* Dark overlay for better text readability */
        z-index: 0;
    }

    #home-content {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        z-index: 1;
        max-width: 7xl;
        margin: 0 auto;
        padding: 0 1rem;
        text-align: left;
        /* CHANGED: Increased scale from 0.85 to 0.95 */
        transform: scale(0.9);
        transform-origin: top left;
        width: 105.26%; /* 100% / 0.95 */
    }
    
    @media (min-width: 640px) {
        #home-content {
            padding: 0 1.5rem;
        }
    }
    
    @media (min-width: 768px) {
        #home-content {
            padding: 0 2.5rem;
        }
    }
    
    /* Adjusted font sizes for home section */
    /* CHANGED: Increased font sizes for the heading */
    #home-content h2 {
        font-size: 5rem !important; /* Increased from 4.5rem */
        margin-bottom: 1.5rem !important;
    }
    
    /* CHANGED: Removed horizontal padding classes */
    #home-content p {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
        margin-bottom: 1.5rem !important;
        max-width: 100% !important;
        padding: 0 !important;
    }
    
    /* Adjust button sizes */
    .home-buttons button {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
        padding: 1rem 2rem !important; /* Increased padding */
        margin-right: 0.5rem !important;
    }
    
    /* Adjust info item sizes */
    .home-info {
        font-size: 1.5rem !important; /* Increased from 1.25rem */
    }
    
    .home-info i {
        font-size: 1.75rem !important; /* Increased from 1.5rem */
    }
    
    /* Ensure backdrop covers the scaled content */
    #home-backdrop {
        /* CHANGED: Adjusted scale for backdrop */
        transform: scale(1.05); /* 1 / 0.95 ≈ 1.05 */
        transform-origin: center;
        width: 105.26%; /* 100% / 0.95 */
        left: -2.63%; /* (105.26% - 100%) / 2 */
    }
    
    .tag-filters-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .tag-filter {
        flex: 0 0 auto;
        white-space: nowrap;
    }
    .menu-item-image {
        height: 260px;
        width: 100%;
        object-fit: contain; 
        object-position: center;
    }


    /* D-tag: keep custom positioning, no crop */
    .menu-item-image.d-tag-image {
        object-position: 50% var(--image-position-y, 0%);
    }

    /* M-tag: always show the full image */
    .menu-item-image.m-tag-image {
        object-fit: contain;   /* ensures full image fits inside */
        object-position: center;
        background-color: #000000; /* optional: avoid blank edges showing black */
    }

    
    .menu-item-card {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .menu-item-card .card-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .option-selector {
        width: 100%;
        background-color: #dcd9e6;
        color: black;
        border: 1px solid #444;
        border-radius: 0.5rem;
        padding: 0.5rem;
        margin-bottom: 0.75rem;
    }
    
    .item-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow-y: auto;
    }
    
    .modal-content {
        background-color: white;
        margin: 2rem auto;
        padding: 2rem;
        border-radius: 1rem;
        max-width: 600px;
        width: 90%;
        position: relative;
    }
    
    .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: black;
        font-size: 1.5rem;
        cursor: pointer;
    }
    
    .modal-image {
        width: 100%;
        height: 300px;
        object-fit: contain; /* Changed from cover to contain */
        object-position: center; /* Ensure image is centered */
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        background-color: #f8f9fa; /* Add background for empty space */
    }
    
    .modal-option {
        margin-bottom: 1rem;
    }
    
    .modal-option label {
        display: block;
        margin-bottom: 0.5rem;
        color: rgb(12, 12, 12);
        font-weight: 600;
    }
    
    .modal-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .modal-buttons button {
        padding: 0.75rem;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
    }
    
    .add-base {
        background-color: #D62616;
        color: white;
        border: none;
    }
    
    .drinks-dropdown {
        display: none;
        background-color: #f8f9fa;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid #e2e8f0;
    }
    
    .drinks-dropdown label {
        display: block;
        margin-bottom: 0.5rem;
        color: #2d3748;
        font-weight: 600;
    }
    
    .vegetable-selection {
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .vegetable-selection h4 {
        color: black;
        margin-bottom: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
    }
    
    .vegetable-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .vegetable-checkbox input {
        margin-right: 0.5rem;
    }
    
    .vegetable-checkbox label {
        color: black;
        cursor: pointer;
    }
    
    .burger-selection {
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .burger-selection h4 {
        color: black;
        margin-bottom: 0.75rem;
        font-size: 1rem;
        font-weight: 600;
    }
    
    .home-buttons {
        justify-content: flex-start;
    }
    
    .home-info {
        justify-content: flex-start;
    }
    
    .header-logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .logo-placeholder {
        width: 50px;
        height: 50px;
        background-color: #D62616;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #121212;
    }
    
    /* UPDATED: Bigger header buttons with more spacing */
    .nav-link {
        font-size: 1.25rem !important; /* Increased from 1.1rem */
        font-weight: 600;
        padding: 0.75rem 1.25rem !important; /* Increased padding */
        transition: all 0.2s ease;
    }
    
    .nav-link:hover {
        transform: translateY(-2px);
    }
    
    /* UPDATED: Increased spacing in header nav container */
    .header-nav-container {
        display: flex;
        align-items: center;
        gap: 2rem !important; /* Increased from 1rem */
    }
    
    /* UPDATED: Bigger cart button */
    #cart-button {
        font-size: 1.1rem !important; /* Increased font size */
        padding: 0.75rem 1.5rem !important; /* Increased padding */
    }
    
    @media (max-width: 767px) {
        /* Updated mobile header layout */
        header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            min-height: 70px; /* Ensure consistent header height */
        }
        
        .mobile-menu-button {
            grid-column: 1;
            justify-self: start;
            z-index: 32;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        .header-logo-container {
            grid-column: 2;
            justify-self: center;
            position: static;
            transform: none;
            display: flex;
            justify-content: center;
            padding: 0 10px; /* Add padding to prevent touching buttons */
        }
        
        .header-logo-container img {
            height: 2.5rem;
            width: auto;
            max-width: 120px; /* Prevent logo from getting too wide */
        }
        
        .header-nav-container {
            grid-column: 3;
            justify-self: end;
            display: flex;
            justify-content: flex-end;
            min-width: 44px; /* Ensure adequate touch target */
        }
        
        /* Adjust cart button for mobile with better spacing */
        #cart-button {
            font-size: 0.875rem !important;
            padding: 0.5rem 0.75rem !important;
            white-space: nowrap;
        }
        
        /* Show only icon on very small screens, show text on larger mobile */
        #cart-count {
            display: none;
        }
        
        /* Show cart count text on slightly larger mobile screens */
        @media (min-width: 400px) {
            #cart-count {
                display: inline;
            }
            
            #cart-button {
                padding: 0.5rem 1rem !important;
            }
        }
        
        /* Additional media query for very small phones */
        @media (max-width: 360px) {
            header {
                gap: 0.5rem;
                padding: 0.5rem;
            }
            
            .header-logo-container img {
                height: 2.25rem;
            }
        }
        
        /* For larger mobile devices, add more spacing */
        @media (min-width: 500px) and (max-width: 767px) {
            header {
                gap: 1.5rem;
                padding: 0.5rem 1.5rem;
            }
        }
    }
    
    .card-input-group {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    @media (min-width: 768px) {
        .card-input-group {
            grid-template-columns: 2fr 1fr 1fr;
        }
    }

    /* NEW: Quantity selector styles - MOVED to be above buttons */
    .quantity-selector {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 1.5rem 0;
    }
    
    .quantity-selector span {
        color: black;
        font-weight: 600;
    }
    
    .quantity-controls {
        display: flex;
        align-items: center;
        background-color: #dcd9e6;
        border-radius: 0.5rem;
        overflow: hidden;
    }
    
    .quantity-btn {
        background-color: #dcd9e6;
        color: rgb(0, 0, 0);
        border: none;
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background-color 0.2s;
    }
    
    .quantity-btn:hover {
        background-color: #6b6b6b;
    }
    
    .quantity-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .quantity-input {
        width: 3rem;
        height: 2.5rem;
        text-align: center;
        background-color: #dcd9e6;
        color: black;
        border: none;
        border-left: 1px solid #a3a3a3;
        border-right: 1px solid #a3a3a3;
        font-size: 1.1rem;
        -moz-appearance: textfield;
    }
    
    .quantity-input::-webkit-outer-spin-button,
    .quantity-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    /* NEW: Clear cart button styles */
    .cart-header-actions {
        display: flex;
        gap: 12px;
    }
    
    #clear-cart {
        color: #D62616;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        padding: 4px 8px;
        border-radius: 4px;
    }
    
    #clear-cart:hover {
        background-color: rgba(255, 106, 0, 0.1);
    }
    
    #clear-cart:disabled {
        color: #666;
        cursor: not-allowed;
    }
    
    #clear-cart:disabled:hover {
        background-color: transparent;
    }

    /* NEW: Mobile hamburger menu styles */
    .mobile-menu-button {
        display: none; /* Hidden by default on desktop */
        background: none;
        border: none;
        color: #D62616;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem;
    }

    .mobile-menu {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 100;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .mobile-menu.active {
        display: flex;
    }

    .mobile-menu nav {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
    }

    .mobile-menu .nav-link {
        font-size: 1.5rem !important;
        color: white;
        padding: 1rem 2rem !important;
    }

    .mobile-menu .nav-link.active-section {
        color: white !important;
        background-color: #D62616 !important;
    }

    .close-mobile-menu {
        position: absolute;
        top: 2rem;
        right: 2rem;
        background: none;
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
    }

    @media (max-width: 767px) {
        /* Show hamburger menu button on mobile */
        .mobile-menu-button {
            display: block !important; /* Force show on mobile */
        }
        
        .header-logo-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 31;
        }
        
        .mobile-menu-button {
            order: -1; /* This moves it to the left */
            z-index: 32;
        }
        
        .header-nav-container {
            display: flex;
            justify-content: flex-end;
            flex: 1;
        }
        
        /* Adjust header layout for mobile */
        header {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* The rest of your existing mobile styles */
        .header-logo-text {
            display: none;
        }
        
        .header-nav-container nav {
            display: none;
        }
        
        #home-content h2 {
            font-size: 3.5rem !important;
        }
        
        #home-content p {
            font-size: 1.4rem !important;
        }
    }

    /* NEW: Combo items styles */
    .combo-items-section {
        background-color: #f8f9fa !important;
        border-left: 4px solid #D62616;
    }

    .combo-items-section h4 {
        color: #D62616 !important;
        font-weight: 700;
    }

    /* NEW: Updated checkout page colors */
    .checkout-page .bg-\[\#1a1a1a\] {
        background-color: #ffffff !important;
        color: #2d3748;
    }

    .checkout-page .text-white {
        color: #2d3748 !important;
    }

    .checkout-page .bg-\[\#222\] {
        background-color: #f7fafc !important;
        color: #2d3748;
        border: 1px solid #e2e8f0;
    }

    .checkout-page input,
    .checkout-page select,
    .checkout-page textarea {
        color: #2d3748 !important;
    }

    .checkout-page input::placeholder {
        color: #a0aec0 !important;
    }

    .checkout-page .border-\[\#333\] {
        border-color: #e2e8f0 !important;
    }

    .checkout-page .text-gray-400 {
        color: #718096 !important;
    }

    .checkout-page h2,
    .checkout-page h3 {
        color: #2d3748 !important;
    }
</style>
</head>

<body class="bg-[#eae8ef] text-[#D62616]">  <!-- Image Positioning Control Panel (Hidden by default) -->
    <div class="image-control-panel">
        <h4>Image Vertical Position</h4>
        <div class="flex items-center"> <span class="image-control-value" id="position-value">0%</span> <input
                type="range" min="-30" max="30" value="0" class="image-control-slider" id="image-position-slider">
            <button id="reset-position" class="bg-[#D62616] text-white text-xs px-2 py-1 rounded">Reset</button> </div>
    </div>

<!-- Mobile Menu -->
<div id="mobile-menu" class="mobile-menu">
    <button class="close-mobile-menu">
        <i class="fas fa-times"></i>
    </button>
    <nav>
        <a class="nav-link active-section" href="#home">Home</a>
        <a class="nav-link" href="#menu">Menu</a>
        <a class="nav-link" href="#about">About</a>
        <a class="nav-link" href="#contact">Contact</a>
    </nav>
</div>

<!-- Item Modal -->
<div id="item-modal" class="item-modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <img id="modal-image" class="modal-image" src="" alt="">
        <h2 id="modal-title" class="text-black text-2xl font-bold mb-2"></h2>
        <p id="modal-description" class="text-black mb-4"></p>
        
        <div id="modal-options">
            <!-- Options will be inserted here -->
        </div>
        
        <!-- NEW: Drinks Dropdown Section -->
        <div id="drinks-dropdown" class="drinks-dropdown">
            <h4>Select a Drink:</h4>
            <select id="drink-select" class="option-selector">
                <!-- Drink options will be populated from drinks.json -->
            </select>
        </div>
        
        <!-- NEW: Burger Selection Section -->
        <div id="burger-selection" class="burger-selection" style="display: none;">
            <h4>Select Burgers:</h4>
            <select id="burger-select" class="option-selector" multiple>
                <!-- Burger options will be populated dynamically -->
            </select>
            <p class="text-sm text-gray-600 mt-2">Hold Ctrl (Cmd on Mac) to select multiple burgers</p>
        </div>
        
        <!-- Vegetable Selection Section -->
        <div id="vegetable-selection" class="vegetable-selection" style="display: none;">
            <h4>Select Vegetables:</h4>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-lettuce" name="vegetables" value="Lettuce">
                <label for="vegetable-lettuce">Lettuce</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-onions" name="vegetables" value="Onions">
                <label for="vegetable-onions">Onions</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-pickles" name="vegetables" value="Pickles">
                <label for="vegetable-pickles">Pickles</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-tomatoes" name="vegetables" value="Tomatoes">
                <label for="vegetable-tomatoes">Tomatoes</label>
            </div>
            <div class="vegetable-checkbox">
                <input type="checkbox" id="vegetable-cucumber" name="vegetables" value="Cucumber">
                <label for="vegetable-cucumber">Cucumber</label>
            </div>
        </div>
        
        <!-- NEW: Quantity Selector MOVED to be above the buttons -->
        <div class="quantity-selector">
            <span>Quantity:</span>
            <div class="quantity-controls">
                <button class="quantity-btn decrease-quantity" disabled>-</button>
                <input type="number" id="modal-quantity" class="quantity-input" value="1" min="1" max="10">
                <button class="quantity-btn increase-quantity">+</button>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button id="modal-add-base" class="add-base">Add to Cart - £<span id="modal-base-price">0.00</span></button>
        </div>
    </div>
</div>

<!-- Overlay -->
<div class="overlay fixed inset-0 bg-black bg-opacity-50 z-40"></div>

<!-- Cart Drawer -->
<div class="cart-drawer fixed top-0 right-0 h-full w-80 bg-[#1a1a1a] shadow-lg z-50">
    <div class="p-4 border-b border-[#222222] flex justify-between items-center">
        <h2 class="text-white font-semibold text-lg">Your Cart</h2>
        <div class="cart-header-actions">
            <button id="clear-cart" class="text-[#D62616] hover:text-[#e05a00] disabled:text-gray-500 disabled:cursor-not-allowed" disabled>
                Clear All
            </button>
            <button id="close-cart" class="text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <div class="p-4 overflow-y-auto h-full pb-32">
        <ul id="cart-items" class="space-y-3">
            <!-- Cart items will be added here dynamically -->
        </ul>
    </div>
    <div class="absolute bottom-0 left-0 right-0 p-4 bg-[#1a1a1a] border-t border-[#222222]">
        <div class="flex justify-between text-white mb-2 text-base">
            <span class="font-semibold">Subtotal:</span>
            <span id="cart-subtotal">£0.00</span>
        </div>
        <button id="checkout-button" class="w-full bg-[#D62616] text-white text-base font-semibold rounded py-3 hover:bg-[#a01c10]">
            Checkout
        </button>
    </div>
</div>

<!-- Main Content -->
<div id="main-content">
    <!-- Updated Header with Logo Placeholder and Enhanced Navigation -->
    <header class="flex items-center justify-between px-4 sm:px-6 md:px-10 py-4 bg-white sticky top-0 z-30 header-shadow">        
        <div class="header-logo-container">
            <!-- CHANGED: Replaced text logo with image -->
            <img src="Logo.jpg" alt="HotBird" class="h-12">
        </div>
        
        <!-- NEW: Mobile hamburger menu button -->
        <button class="mobile-menu-button md:hidden">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Navigation and Cart Container -->
        <div class="header-nav-container">
            <nav class="hidden md:flex space-x-4 text-[#D62616] items-center">
                <a class="hover:text-[#a01c10] nav-link active-section" href="#home">Home</a>
                <a class="hover:text-[#a01c10] nav-link" href="#menu">Menu</a>
                <a class="hover:text-[#a01c10] nav-link" href="#about">About</a>
                <a class="hover:text-[#a01c10] nav-link" href="#contact">Contact</a>
            </nav>
            <button id="cart-button" class="flex items-center space-x-2 bg-[#D62616] text-white text-base font-semibold rounded px-4 py-2 hover:bg-[#a01c10]">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">Cart (0)</span>
            </button>
        </div>
    </header>

    <main>
        <!-- Home Section - Updated Structure with correct ID and left-aligned content -->
        <section id="home">
            <div id="home-backdrop"></div>
            <div id="home-content" class="py-12 md:py-24">
                <div class="max-w-4xl">
                    <!-- CHANGED: Increased font sizes for the heading -->
                    <h2 class="text-white text-6xl sm:text-7xl md:text-8xl font-extrabold leading-tight mb-8">
                        <span class="righteous-font block mb-2">Fryin' High</span>
                        <span class="text-[#D62616] righteous-font block">Since Day One</span>
                    </h2>
                    <!-- CHANGED: Removed horizontal padding classes -->
                    <p class="lato-font text-xl sm:text-2xl md:text-3xl text-gray-300 mb-12 leading-relaxed w-full">
                        Deliciously bold, perfectly crispy, and full of flavor, our golden fried chicken, juicy wings and crispy fries are made to satisfy every craving. Fresh ingredients, fiery taste, and fun in every bite - that's the hot bird promise.
                    </p>
                        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 mb-6 home-buttons">
                            <button id="order-now-btn" class="bg-[#D62616] text-black text-lg sm:text-xl font-semibold rounded-xl px-8 py-4 hover:bg-[#e05a00] transition-colors">
                                Order Now
                            </button>
                            <button id="view-menu-btn" class="bg-black text-white border-2 border-[#D62616] text-lg sm:text-xl font-semibold rounded-xl px-10 py-4 hover:bg-[#D62616] hover:text-black transition-colors">
                                View Menu
                            </button>
                        </div>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-12 text-xl sm:text-2xl text-gray-300 font-semibold home-info">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-star text-[#D62616] text-2xl"></i>
                            <span>4.8 Rating</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-clock text-[#D62616] text-2xl"></i>
                            <span>12PM - 2AM Daily</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Menu Section -->
        <section id="menu" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20">
            <h3 class="text-center font-semibold text- text-3xl lg:text-6xl mb-4 righteous-font">OUR MENU</h3>
            <p class="text-center text-gray-400 text-lg sm:text-xl mb-12">Discover our delicious selection of kebabs, burgers and more</p>
            
            <!-- Search and Filters -->
            <!-- Search and Filters -->
            <div class="mb-12">
                <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
                    <div class="relative w-full sm:w-80">
                        <input type="text" id="search-input" placeholder="Search menu items..." class="w-full bg-[#1a1a1a] text-white text-lg rounded-xl py-3 px-5 pl-12 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        <i class="fas fa-search absolute left-4 top-3.5 text-gray-400 text-lg"></i>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h4 class="text-center text-[#D62616] text-xl mb-4">Filter by Category</h4>
                    <div class="tag-filters-container">
                        <!-- UPDATED: Reordered filter buttons as requested -->
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black active" data-tag="all">All</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="k">Kebabs</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="b">Burgers</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="w">Wings</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="s">Sides</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="d">Drinks</button>
                        <button class="tag-filter text-sm bg-[#1a1a1a] text-white px-5 py-2.5 rounded-lg hover:bg-[#D62616] hover:text-black" data-tag="m">Meal Deals</button>
                    </div>
                </div>
            </div>
            
            <!-- Menu Items Grid -->
            <div id="menu-items" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Menu items will be loaded here dynamically -->
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20">
            <h3 class="text-center font-semibold text-3xl lg:text-6xl mb-4 righteous-font">ABOUT US</h3>
            <p class="text-center text-gray-400 text-lg sm:text-xl mb-12">Learn more about our story and passion for great food</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h4 class="text-2xl font-bold mb-6 text-[#D62616]">Our Story</h4>
                    <p class="text-gray-300 text-lg mb-6">
                        At HotBird, we believe in serving food that's not just delicious, but memorable. 
                        Our journey began with a simple passion for creating the perfect fried chicken - 
                        crispy on the outside, juicy on the inside, and packed with flavor.
                    </p>
                    <p class="text-gray-300 text-lg mb-6">
                        Every dish we serve is crafted with care, using the freshest ingredients and 
                        our secret blend of spices that makes our chicken truly special.
                    </p>
                    <div class="flex items-center space-x-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-[#D62616]">5+</div>
                            <div class="text-gray-400">Years Experience</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-[#D62616]">10K+</div>
                            <div class="text-gray-400">Happy Customers</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-[#D62616]">50+</div>
                            <div class="text-gray-400">Menu Items</div>
                        </div>
                    </div>
                </div>
                <div class="bg-[#1a1a1a] rounded-2xl p-8">
                    <img src="about-image.jpg" alt="About HotBird" class="w-full h-80 object-cover rounded-xl">
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-10 py-12 md:py-20">
            <h3 class="text-center font-semibold text-3xl lg:text-6xl mb-4 righteous-font">CONTACT US</h3>
            <p class="text-center text-gray-400 text-lg sm:text-xl mb-12">Get in touch with us for orders or inquiries</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h4 class="text-2xl font-bold mb-6 text-[#D62616]">Visit Our Location</h4>
                    <div class="space-y-4 text-gray-300 text-lg">
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-map-marker-alt text-[#D62616] mt-1"></i>
                            <div>
                                <p class="font-semibold">Address</p>
                                <p>123 Chicken Street, Food City, FC1 2AB</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-clock text-[#D62616] mt-1"></i>
                            <div>
                                <p class="font-semibold">Opening Hours</p>
                                <p>Monday - Sunday: 12PM - 2AM</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-phone text-[#D62616] mt-1"></i>
                            <div>
                                <p class="font-semibold">Phone</p>
                                <p>+44 1234 567890</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-envelope text-[#D62616] mt-1"></i>
                            <div>
                                <p class="font-semibold">Email</p>
                                <p>info@hotbird.com</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-[#1a1a1a] rounded-2xl p-8">
                    <h4 class="text-2xl font-bold mb-6 text-[#D62616]">Send us a Message</h4>
                    <form class="space-y-4">
                        <input type="text" placeholder="Your Name" class="w-full bg-[#222] text-white rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        <input type="email" placeholder="Your Email" class="w-full bg-[#222] text-white rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        <textarea placeholder="Your Message" rows="4" class="w-full bg-[#222] text-white rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]"></textarea>
                        <button type="submit" class="w-full bg-[#D62616] text-white font-semibold rounded-xl py-3 hover:bg-[#a01c10] transition-colors">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Checkout Page -->
<div id="checkout-page" class="checkout-page fixed inset-0 bg-white z-50 overflow-y-auto">
    <div class="min-h-screen bg-white">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <!-- Header -->
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">Checkout</h1>
                <button id="back-to-menu" class="text-[#D62616] hover:text-[#a01c10] font-semibold">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Menu
                </button>
            </div>

            <!-- Checkout Content -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Left Column - Order Summary -->
                <div>
                    <h2 class="text-2xl font-bold mb-4">Order Summary</h2>
                    <div id="checkout-items" class="bg-[#f7fafc] rounded-lg p-4 mb-6">
                        <!-- Checkout items will be populated here -->
                    </div>
                    <div class="bg-[#f7fafc] rounded-lg p-4">
                        <div class="flex justify-between mb-2">
                            <span>Subtotal:</span>
                            <span id="checkout-subtotal">£0.00</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span>Delivery:</span>
                            <span id="checkout-delivery">£0.00</span>
                        </div>
                        <div class="flex justify-between font-bold text-lg border-t border-[#e2e8f0] pt-2">
                            <span>Total:</span>
                            <span id="checkout-total">£0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Customer Information -->
                <div>
                    <h2 class="text-2xl font-bold mb-4">Customer Information</h2>
                    <form id="checkout-form" class="space-y-4">
                        <div class="card-input-group">
                            <div>
                                <label class="block mb-2 font-semibold">Full Name</label>
                                <input type="text" required class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold">Phone Number</label>
                                <input type="tel" required class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Email</label>
                            <input type="email" required class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Delivery Address</label>
                            <textarea required rows="3" class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]"></textarea>
                        </div>
                        
                        <div class="card-input-group">
                            <div>
                                <label class="block mb-2 font-semibold">City</label>
                                <input type="text" required class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                            </div>
                            <div>
                                <label class="block mb-2 font-semibold">Postcode</label>
                                <input type="text" required class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Delivery Instructions (Optional)</label>
                            <textarea rows="2" class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]"></textarea>
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Payment Method</label>
                            <select class="w-full bg-white border border-[#e2e8f0] text-black rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-[#D62616]">
                                <option>Cash on Delivery</option>
                                <option>Card Payment</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="w-full bg-[#D62616] text-white font-semibold rounded-lg py-4 hover:bg-[#a01c10] transition-colors">
                            Place Order
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Global variables
    let menuData = [];
    let drinksData = [];
    let cart = [];
    let currentModalItem = null;
    let currentModalOptions = {};
    let currentModalPrice = 0;

    // Burger selection configuration
    const burgerOptions = [
        "Nash hot bird Burger",
        "Nash Crunch Burger", 
        "Hot Honey Siracha Burger",
        "Korean BBQ Burger",
        "Buffalo Chicken Burger"
    ];
    const burgerPrice = 6.00;

    // DOM elements
    const cartButton = document.getElementById('cart-button');
    const cartDrawer = document.querySelector('.cart-drawer');
    const closeCart = document.getElementById('close-cart');
    const overlay = document.querySelector('.overlay');
    const cartItems = document.getElementById('cart-items');
    const cartSubtotal = document.getElementById('cart-subtotal');
    const cartCount = document.getElementById('cart-count');
    const checkoutButton = document.getElementById('checkout-button');
    const clearCartButton = document.getElementById('clear-cart');
    const mainContent = document.getElementById('main-content');
    const checkoutPage = document.getElementById('checkout-page');
    const backToMenu = document.getElementById('back-to-menu');
    const checkoutItems = document.getElementById('checkout-items');
    const checkoutSubtotal = document.getElementById('checkout-subtotal');
    const checkoutDelivery = document.getElementById('checkout-delivery');
    const checkoutTotal = document.getElementById('checkout-total');
    const checkoutForm = document.getElementById('checkout-form');
    const searchInput = document.getElementById('search-input');
    const tagFilters = document.querySelectorAll('.tag-filter');
    const menuItemsContainer = document.getElementById('menu-items');
    const itemModal = document.getElementById('item-modal');
    const closeModal = document.querySelector('.close-modal');
    const modalImage = document.getElementById('modal-image');
    const modalTitle = document.getElementById('modal-title');
    const modalDescription = document.getElementById('modal-description');
    const modalOptions = document.getElementById('modal-options');
    const modalBasePrice = document.getElementById('modal-base-price');
    const modalAddBase = document.getElementById('modal-add-base');
    const drinksDropdown = document.getElementById('drinks-dropdown');
    const drinkSelect = document.getElementById('drink-select');
    const vegetableSelection = document.getElementById('vegetable-selection');
    const burgerSelection = document.getElementById('burger-selection');
    const burgerSelect = document.getElementById('burger-select');
    const modalQuantity = document.getElementById('modal-quantity');
    const decreaseQuantity = document.querySelector('.decrease-quantity');
    const increaseQuantity = document.querySelector('.increase-quantity');
    const orderNowBtn = document.getElementById('order-now-btn');
    const viewMenuBtn = document.getElementById('view-menu-btn');
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMobileMenu = document.querySelector('.close-mobile-menu');
    const navLinks = document.querySelectorAll('.nav-link');
    const imageControlPanel = document.querySelector('.image-control-panel');
    const imagePositionSlider = document.getElementById('image-position-slider');
    const positionValue = document.getElementById('position-value');
    const resetPosition = document.getElementById('reset-position');

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        loadMenuData();
        setupEventListeners();
        updateCart();
    });

    // Load menu data from JSON files
    async function loadMenuData() {
        try {
            const response = await fetch('menu.json');
            menuData = await response.json();
            displayMenuItems(menuData);
            
            // Load drinks data
            const drinksResponse = await fetch('drinks.json');
            drinksData = await drinksResponse.json();
            populateDrinkOptions();
        } catch (error) {
            console.error('Error loading menu data:', error);
        }
    }

    // Populate drink options in the modal
    function populateDrinkOptions() {
        drinkSelect.innerHTML = '<option value="">Select a drink</option>';
        drinksData.forEach(drink => {
            const option = document.createElement('option');
            option.value = drink.name;
            option.textContent = `${drink.name} - £${drink.price.toFixed(2)}`;
            option.dataset.price = drink.price;
            drinkSelect.appendChild(option);
        });
    }

    // Setup all event listeners
    function setupEventListeners() {
        // Cart functionality
        cartButton.addEventListener('click', toggleCart);
        closeCart.addEventListener('click', toggleCart);
        overlay.addEventListener('click', closeAllOverlays);
        checkoutButton.addEventListener('click', openCheckout);
        clearCartButton.addEventListener('click', clearCart);
        backToMenu.addEventListener('click', closeCheckout);
        
        // Checkout form
        checkoutForm.addEventListener('submit', placeOrder);
        
        // Search and filter
        searchInput.addEventListener('input', filterMenuItems);
        tagFilters.forEach(filter => {
            filter.addEventListener('click', filterByTag);
        });
        
        // Modal functionality
        closeModal.addEventListener('click', closeItemModal);
        modalAddBase.addEventListener('click', addToCartFromModal);
        
        // Quantity controls
        decreaseQuantity.addEventListener('click', decreaseModalQuantity);
        increaseQuantity.addEventListener('click', increaseModalQuantity);
        modalQuantity.addEventListener('change', validateModalQuantity);
        
        // Navigation buttons
        orderNowBtn.addEventListener('click', scrollToMenu);
        viewMenuBtn.addEventListener('click', scrollToMenu);
        
        // Mobile menu
        mobileMenuButton.addEventListener('click', toggleMobileMenu);
        closeMobileMenu.addEventListener('click', toggleMobileMenu);
        
        // Navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', handleNavClick);
        });
        
        // Image positioning controls
        imagePositionSlider.addEventListener('input', updateImagePosition);
        resetPosition.addEventListener('click', resetImagePosition);
        
        // Close modals with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAllOverlays();
            }
        });
    }

    // Display menu items in the grid
    function displayMenuItems(items) {
        menuItemsContainer.innerHTML = '';
        
        items.forEach(item => {
            const menuItem = document.createElement('div');
            menuItem.className = 'menu-item-card bg-[#1a1a1a] rounded-2xl overflow-hidden cursor-pointer';
            menuItem.dataset.tags = item.tags || '';
            
            // Determine image class based on tags
            let imageClass = 'menu-item-image';
            if (item.tags && item.tags.includes('d')) {
                imageClass += ' d-tag-image';
            } else if (item.tags && item.tags.includes('m')) {
                imageClass += ' m-tag-image';
            }
            
            menuItem.innerHTML = `
                <div class="card-content">
                    <img src="${item.image}" alt="${item.name}" class="${imageClass}">
                    <div class="p-6">
                        <h4 class="text-xl font-bold mb-2">${item.name}</h4>
                        <p class="text-gray-400 mb-4">${item.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-[#D62616] text-xl font-bold">£${item.price.toFixed(2)}</span>
                            <button class="bg-[#D62616] text-white px-4 py-2 rounded-lg hover:bg-[#a01c10] transition-colors add-to-cart-btn">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners
            const addToCartBtn = menuItem.querySelector('.add-to-cart-btn');
            addToCartBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                openItemModal(item);
            });
            
            menuItem.addEventListener('click', () => {
                openItemModal(item);
            });
            
            menuItemsContainer.appendChild(menuItem);
        });
    }

    // Filter menu items based on search input
    function filterMenuItems() {
        const searchTerm = searchInput.value.toLowerCase();
        const filteredItems = menuData.filter(item => 
            item.name.toLowerCase().includes(searchTerm) || 
            item.description.toLowerCase().includes(searchTerm)
        );
        displayMenuItems(filteredItems);
    }

    // Filter menu items by tag
    function filterByTag(e) {
        const tag = e.target.dataset.tag;
        
        // Update active filter
        tagFilters.forEach(filter => {
            filter.classList.remove('active');
        });
        e.target.classList.add('active');
        
        if (tag === 'all') {
            displayMenuItems(menuData);
        } else {
            const filteredItems = menuData.filter(item => 
                item.tags && item.tags.includes(tag)
            );
            displayMenuItems(filteredItems);
        }
    }

    // Open item modal with details
    function openItemModal(item) {
        currentModalItem = item;
        currentModalOptions = {};
        currentModalPrice = item.price;
        
        // Reset modal state
        modalImage.src = item.image;
        modalTitle.textContent = item.name;
        modalDescription.textContent = item.description;
        modalBasePrice.textContent = item.price.toFixed(2);
        modalQuantity.value = 1;
        updateQuantityControls();
        
        // Clear previous options
        modalOptions.innerHTML = '';
        
        // Hide all special sections initially
        drinksDropdown.style.display = 'none';
        vegetableSelection.style.display = 'none';
        burgerSelection.style.display = 'none';
        
        // Check if item has options
        if (item.options) {
            Object.keys(item.options).forEach(optionName => {
                const option = item.options[optionName];
                const optionDiv = document.createElement('div');
                optionDiv.className = 'modal-option';
                
                optionDiv.innerHTML = `
                    <label>${optionName}:</label>
                    <select class="option-selector" data-option="${optionName}">
                        ${Object.keys(option).map(key => 
                            `<option value="${key}" ${key === 'none' ? 'selected' : ''}>${key} ${option[key] !== 0 ? `(+£${option[key].toFixed(2)})` : ''}</option>`
                        ).join('')}
                    </select>
                `;
                
                modalOptions.appendChild(optionDiv);
                
                // Add event listener for option changes
                const selector = optionDiv.querySelector('select');
                selector.addEventListener('change', updateModalPrice);
            });
        }
        
        // Show drinks dropdown for meal deals (m tag)
        if (item.tags && item.tags.includes('m')) {
            drinksDropdown.style.display = 'block';
            drinkSelect.value = '';
            drinkSelect.addEventListener('change', updateModalPrice);
        }
        
        // Show vegetable selection for kebabs (k tag)
        if (item.tags && item.tags.includes('k')) {
            vegetableSelection.style.display = 'block';
            // Reset vegetable checkboxes
            const vegCheckboxes = vegetableSelection.querySelectorAll('input[type="checkbox"]');
            vegCheckboxes.forEach(checkbox => {
                checkbox.checked = false;
                checkbox.addEventListener('change', updateModalPrice);
            });
        }
        
        // Show burger selection for items with bs tag
        if (item.tags && item.tags.includes('bs')) {
            burgerSelection.style.display = 'block';
            populateBurgerOptions();
            burgerSelect.addEventListener('change', updateModalPrice);
        }
        
        // Update price initially
        updateModalPrice();
        
        // Show modal
        itemModal.style.display = 'block';
        overlay.classList.add('active');
        
        // Show image control panel for d-tag items
        if (item.tags && item.tags.includes('d')) {
            imageControlPanel.style.display = 'block';
        } else {
            imageControlPanel.style.display = 'none';
        }
    }

    // Populate burger options in the dropdown
    function populateBurgerOptions() {
        burgerSelect.innerHTML = '';
        burgerOptions.forEach(burger => {
            const option = document.createElement('option');
            option.value = burger;
            option.textContent = `${burger} - £${burgerPrice.toFixed(2)}`;
            burgerSelect.appendChild(option);
        });
    }

    // Close item modal
    function closeItemModal() {
        itemModal.style.display = 'none';
        overlay.classList.remove('active');
        imageControlPanel.style.display = 'none';
    }

    // Update modal price based on selections
    function updateModalPrice() {
        let totalPrice = currentModalItem.price;
        
        // Add option prices
        const optionSelectors = modalOptions.querySelectorAll('select');
        optionSelectors.forEach(selector => {
            const optionName = selector.dataset.option;
            const selectedValue = selector.value;
            if (selectedValue !== 'none' && currentModalItem.options[optionName]) {
                totalPrice += currentModalItem.options[optionName][selectedValue];
            }
        });
        
        // Add drink price if selected
        if (drinksDropdown.style.display === 'block' && drinkSelect.value) {
            const selectedDrink = drinkSelect.options[drinkSelect.selectedIndex];
            totalPrice += parseFloat(selectedDrink.dataset.price);
        }
        
        // Add burger prices if selected
        if (burgerSelection.style.display === 'block') {
            const selectedBurgers = Array.from(burgerSelect.selectedOptions);
            totalPrice += selectedBurgers.length * burgerPrice;
        }
        
        currentModalPrice = totalPrice;
        modalBasePrice.textContent = totalPrice.toFixed(2);
    }

    // Quantity control functions
    function decreaseModalQuantity() {
        if (modalQuantity.value > 1) {
            modalQuantity.value = parseInt(modalQuantity.value) - 1;
            updateQuantityControls();
        }
    }

    function increaseModalQuantity() {
        if (modalQuantity.value < 10) {
            modalQuantity.value = parseInt(modalQuantity.value) + 1;
            updateQuantityControls();
        }
    }

    function validateModalQuantity() {
        let value = parseInt(modalQuantity.value);
        if (isNaN(value) || value < 1) {
            modalQuantity.value = 1;
        } else if (value > 10) {
            modalQuantity.value = 10;
        }
        updateQuantityControls();
    }

    function updateQuantityControls() {
        decreaseQuantity.disabled = modalQuantity.value <= 1;
        increaseQuantity.disabled = modalQuantity.value >= 10;
    }

    // Add item to cart from modal
    function addToCartFromModal() {
        const quantity = parseInt(modalQuantity.value);
        
        // Collect options
        const options = {};
        const optionSelectors = modalOptions.querySelectorAll('select');
        optionSelectors.forEach(selector => {
            const optionName = selector.dataset.option;
            const selectedValue = selector.value;
            if (selectedValue !== 'none') {
                options[optionName] = selectedValue;
            }
        });
        
        // Collect drink selection
        let drink = null;
        if (drinksDropdown.style.display === 'block' && drinkSelect.value) {
            const selectedDrink = drinkSelect.options[drinkSelect.selectedIndex];
            drink = {
                name: selectedDrink.value,
                price: parseFloat(selectedDrink.dataset.price)
            };
        }
        
        // Collect vegetable selections
        let vegetables = [];
        if (vegetableSelection.style.display === 'block') {
            const vegCheckboxes = vegetableSelection.querySelectorAll('input[type="checkbox"]:checked');
            vegetables = Array.from(vegCheckboxes).map(checkbox => checkbox.value);
        }
        
        // Collect burger selections
        let burgers = [];
        if (burgerSelection.style.display === 'block') {
            const selectedBurgers = Array.from(burgerSelect.selectedOptions);
            burgers = selectedBurgers.map(option => option.value);
        }
        
        // Add to cart
        for (let i = 0; i < quantity; i++) {
            cart.push({
                ...currentModalItem,
                options: Object.keys(options).length > 0 ? options : undefined,
                drink: drink,
                vegetables: vegetables.length > 0 ? vegetables : undefined,
                burgers: burgers.length > 0 ? burgers : undefined,
                finalPrice: currentModalPrice
            });
        }
        
        updateCart();
        closeItemModal();
        
        // Show confirmation
        showNotification(`Added ${quantity} ${currentModalItem.name} to cart`);
    }

    // Cart functionality
    function toggleCart() {
        cartDrawer.classList.toggle('open');
        overlay.classList.toggle('active');
    }

    function closeAllOverlays() {
        cartDrawer.classList.remove('open');
        overlay.classList.remove('active');
        itemModal.style.display = 'none';
        imageControlPanel.style.display = 'none';
        mobileMenu.classList.remove('active');
    }

    function updateCart() {
        cartItems.innerHTML = '';
        
        if (cart.length === 0) {
            cartItems.innerHTML = '<li class="text-center text-gray-400 py-8">Your cart is empty</li>';
            cartSubtotal.textContent = '£0.00';
            cartCount.textContent = 'Cart (0)';
            clearCartButton.disabled = true;
            checkoutButton.disabled = true;
            return;
        }
        
        clearCartButton.disabled = false;
        checkoutButton.disabled = false;
        
        // Group items by name and options for display
        const itemGroups = {};
        cart.forEach(item => {
            const key = JSON.stringify({
                name: item.name,
                options: item.options,
                drink: item.drink,
                vegetables: item.vegetables,
                burgers: item.burgers
            });
            
            if (!itemGroups[key]) {
                itemGroups[key] = {
                    item: item,
                    quantity: 0
                };
            }
            itemGroups[key].quantity++;
        });
        
        // Display grouped items
        Object.values(itemGroups).forEach(group => {
            const li = document.createElement('li');
            li.className = 'bg-[#222] rounded-lg p-4';
            
            let optionsText = '';
            if (group.item.options) {
                optionsText = Object.values(group.item.options).map(opt => 
                    `<span class="text-xs bg-[#333] px-2 py-1 rounded">${opt}</span>`
                ).join('');
            }
            
            let drinkText = '';
            if (group.item.drink) {
                drinkText = `<div class="text-xs text-gray-400">Drink: ${group.item.drink.name}</div>`;
            }
            
            let vegetablesText = '';
            if (group.item.vegetables && group.item.vegetables.length > 0) {
                vegetablesText = `<div class="text-xs text-gray-400">Veg: ${group.item.vegetables.join(', ')}</div>`;
            }
            
            let burgersText = '';
            if (group.item.burgers && group.item.burgers.length > 0) {
                burgersText = `<div class="text-xs text-gray-400">Burgers: ${group.item.burgers.join(', ')}</div>`;
            }
            
            li.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <div class="flex-1">
                        <h4 class="text-white font-semibold">${group.item.name}</h4>
                        ${optionsText ? `<div class="mt-1 space-x-1">${optionsText}</div>` : ''}
                        ${drinkText}
                        ${vegetablesText}
                        ${burgersText}
                    </div>
                    <button class="remove-item text-[#D62616] hover:text-[#e05a00] ml-2">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-2">
                        <button class="decrease-item text-white bg-[#333] w-6 h-6 rounded flex items-center justify-center">
                            -
                        </button>
                        <span class="text-white">${group.quantity}</span>
                        <button class="increase-item text-white bg-[#333] w-6 h-6 rounded flex items-center justify-center">
                            +
                        </button>
                    </div>
                    <span class="text-white font-semibold">£${(group.item.finalPrice * group.quantity).toFixed(2)}</span>
                </div>
            `;
            
            // Add event listeners for item controls
            const removeBtn = li.querySelector('.remove-item');
            const decreaseBtn = li.querySelector('.decrease-item');
            const increaseBtn = li.querySelector('.increase-item');
            
            removeBtn.addEventListener('click', () => {
                removeAllFromCart(group.item);
            });
            
            decreaseBtn.addEventListener('click', () => {
                removeFromCart(group.item);
            });
            
            increaseBtn.addEventListener('click', () => {
                addToCart(group.item);
            });
            
            cartItems.appendChild(li);
        });
        
        // Update cart summary
        const subtotal = cart.reduce((sum, item) => sum + item.finalPrice, 0);
        cartSubtotal.textContent = `£${subtotal.toFixed(2)}`;
        cartCount.textContent = `Cart (${cart.length})`;
    }

    function addToCart(item) {
        cart.push({...item});
        updateCart();
    }

    function removeFromCart(itemToRemove) {
        const index = cart.findIndex(item => 
            item.name === itemToRemove.name &&
            JSON.stringify(item.options) === JSON.stringify(itemToRemove.options) &&
            JSON.stringify(item.drink) === JSON.stringify(itemToRemove.drink) &&
            JSON.stringify(item.vegetables) === JSON.stringify(itemToRemove.vegetables) &&
            JSON.stringify(item.burgers) === JSON.stringify(itemToRemove.burgers)
        );
        
        if (index !== -1) {
            cart.splice(index, 1);
            updateCart();
        }
    }

    function removeAllFromCart(itemToRemove) {
        cart = cart.filter(item => 
            !(item.name === itemToRemove.name &&
            JSON.stringify(item.options) === JSON.stringify(itemToRemove.options) &&
            JSON.stringify(item.drink) === JSON.stringify(itemToRemove.drink) &&
            JSON.stringify(item.vegetables) === JSON.stringify(itemToRemove.vegetables) &&
            JSON.stringify(item.burgers) === JSON.stringify(itemToRemove.burgers))
        );
        updateCart();
    }

    function clearCart() {
        if (confirm('Are you sure you want to clear your cart?')) {
            cart = [];
            updateCart();
            showNotification('Cart cleared');
        }
    }

    // Checkout functionality
    function openCheckout() {
        if (cart.length === 0) return;
        
        mainContent.style.display = 'none';
        checkoutPage.style.display = 'block';
        updateCheckoutDisplay();
    }

    function closeCheckout() {
        mainContent.style.display = 'block';
        checkoutPage.style.display = 'none';
        closeAllOverlays();
    }

    function updateCheckoutDisplay() {
        checkoutItems.innerHTML = '';
        
        // Group items for display (same as cart)
        const itemGroups = {};
        cart.forEach(item => {
            const key = JSON.stringify({
                name: item.name,
                options: item.options,
                drink: item.drink,
                vegetables: item.vegetables,
                burgers: item.burgers
            });
            
            if (!itemGroups[key]) {
                itemGroups[key] = {
                    item: item,
                    quantity: 0
                };
            }
            itemGroups[key].quantity++;
        });
        
        // Display grouped items
        Object.values(itemGroups).forEach(group => {
            const div = document.createElement('div');
            div.className = 'flex justify-between items-center py-2 border-b border-[#e2e8f0]';
            
            let optionsText = '';
            if (group.item.options) {
                optionsText = Object.values(group.item.options).join(', ');
            }
            
            let extras = [];
            if (group.item.drink) extras.push(group.item.drink.name);
            if (group.item.vegetables) extras.push(...group.item.vegetables);
            if (group.item.burgers) extras.push(...group.item.burgers.map(b => `${b} Burger`));
            
            const extrasText = extras.length > 0 ? `(${extras.join(', ')})` : '';
            
            div.innerHTML = `
                <div>
                    <div class="font-semibold">${group.quantity}x ${group.item.name}</div>
                    ${optionsText ? `<div class="text-sm text-gray-600">${optionsText}</div>` : ''}
                    ${extrasText ? `<div class="text-sm text-gray-600">${extrasText}</div>` : ''}
                </div>
                <div class="font-semibold">£${(group.item.finalPrice * group.quantity).toFixed(2)}</div>
            `;
            
            checkoutItems.appendChild(div);
        });
        
        // Update totals
        const subtotal = cart.reduce((sum, item) => sum + item.finalPrice, 0);
        const delivery = subtotal > 0 ? 2.99 : 0; // Example delivery fee
        const total = subtotal + delivery;
        
        checkoutSubtotal.textContent = `£${subtotal.toFixed(2)}`;
        checkoutDelivery.textContent = `£${delivery.toFixed(2)}`;
        checkoutTotal.textContent = `£${total.toFixed(2)}`;
    }

    function placeOrder(e) {
        e.preventDefault();
        
        // Here you would typically send the order to a server
        alert('Order placed successfully! Thank you for your order.');
        
        // Clear cart and return to menu
        cart = [];
        updateCart();
        closeCheckout();
    }

    // Navigation functions
    function scrollToMenu() {
        document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
    }

    function toggleMobileMenu() {
        mobileMenu.classList.toggle('active');
    }

    function handleNavClick(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        document.getElementById(targetId).scrollIntoView({ behavior: 'smooth' });
        
        // Update active section
        navLinks.forEach(link => {
            link.classList.remove('active-section');
        });
        this.classList.add('active-section');
        
        // Close mobile menu if open
        mobileMenu.classList.remove('active');
    }

    // Image positioning functionality
    function updateImagePosition() {
        const value = imagePositionSlider.value;
        positionValue.textContent = `${value}%`;
        document.documentElement.style.setProperty('--image-position-y', `${value}%`);
        
        // Update all d-tag images
        const dTagImages = document.querySelectorAll('.d-tag-image');
        dTagImages.forEach(img => {
            img.style.objectPosition = `50% ${value}%`;
        });
    }

    function resetImagePosition() {
        imagePositionSlider.value = 0;
        updateImagePosition();
    }

    // Utility functions
    function showNotification(message) {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-[#D62616] text-white px-6 py-3 rounded-lg shadow-lg z-50';
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        // Remove notification after 3 seconds
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // Update active section on scroll
    window.addEventListener('scroll', function() {
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        
        let currentSection = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop - 100;
            const sectionHeight = section.clientHeight;
            if (pageYOffset >= sectionTop && pageYOffset < sectionTop + sectionHeight) {
                currentSection = section.getAttribute('id');
            }
        });
        
        navLinks.forEach(link => {
            link.classList.remove('active-section');
            if (link.getAttribute('href') === `#${currentSection}`) {
                link.classList.add('active-section');
            }
        });
    });
</script>
</body>
</html>
